<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 High-Dimensional Data | Data Handling Pocket Reference</title>
  <meta name="description" content="A guide to practical data handling with a focus on R and data analytics in economics and the social sciences." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 High-Dimensional Data | Data Handling Pocket Reference" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://umatter.github.io/datahandling/img/cover.png" />
  <meta property="og:description" content="A guide to practical data handling with a focus on R and data analytics in economics and the social sciences." />
  <meta name="github-repo" content="umatter/datahandling" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 High-Dimensional Data | Data Handling Pocket Reference" />
  
  <meta name="twitter:description" content="A guide to practical data handling with a focus on R and data analytics in economics and the social sciences." />
  <meta name="twitter:image" content="https://umatter.github.io/datahandling/img/cover.png" />

<meta name="author" content="Ulrich Matter" />


<meta name="date" content="2022-10-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-storage-and-data-structures.html"/>
<link rel="next" href="text-data.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Handling</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites-and-aims"><i class="fa fa-check"></i>Prerequisites and aims</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="programming-with-data.html"><a href="programming-with-data.html"><i class="fa fa-check"></i><b>2</b> Programming with Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="programming-with-data.html"><a href="programming-with-data.html#handling-data-programmatically"><i class="fa fa-check"></i><b>2.1</b> Handling data programmatically</a></li>
<li class="chapter" data-level="2.2" data-path="programming-with-data.html"><a href="programming-with-data.html#why-r"><i class="fa fa-check"></i><b>2.2</b> Why <em>R</em>?</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="programming-with-data.html"><a href="programming-with-data.html#the-data-language"><i class="fa fa-check"></i><b>2.2.1</b> The ‘data language’</a></li>
<li class="chapter" data-level="2.2.2" data-path="programming-with-data.html"><a href="programming-with-data.html#high-level-language-relatively-easy-to-learn"><i class="fa fa-check"></i><b>2.2.2</b> High-level language, relatively easy to learn</a></li>
<li class="chapter" data-level="2.2.3" data-path="programming-with-data.html"><a href="programming-with-data.html#free-open-source-large-community"><i class="fa fa-check"></i><b>2.2.3</b> Free, open source, large community</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="programming-with-data.html"><a href="programming-with-data.html#rrstudio-overview"><i class="fa fa-check"></i><b>2.3</b> <em>R</em>/RStudio overview</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="programming-with-data.html"><a href="programming-with-data.html#the-r-console"><i class="fa fa-check"></i><b>2.3.1</b> The <em>R</em>-Console</a></li>
<li class="chapter" data-level="2.3.2" data-path="programming-with-data.html"><a href="programming-with-data.html#r-scripts"><i class="fa fa-check"></i><b>2.3.2</b> <em>R</em>-Scripts</a></li>
<li class="chapter" data-level="2.3.3" data-path="programming-with-data.html"><a href="programming-with-data.html#r-environment"><i class="fa fa-check"></i><b>2.3.3</b> <em>R</em> Environment</a></li>
<li class="chapter" data-level="2.3.4" data-path="programming-with-data.html"><a href="programming-with-data.html#file-browser"><i class="fa fa-check"></i><b>2.3.4</b> File Browser</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="programming-with-data.html"><a href="programming-with-data.html#first-steps-with-r"><i class="fa fa-check"></i><b>2.4</b> First steps with R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="programming-with-data.html"><a href="programming-with-data.html#values-vectors-and-variables"><i class="fa fa-check"></i><b>2.4.1</b> Values, Vectors, and Variables</a></li>
<li class="chapter" data-level="2.4.2" data-path="programming-with-data.html"><a href="programming-with-data.html#math-operators"><i class="fa fa-check"></i><b>2.4.2</b> Math operators</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="programming-with-data.html"><a href="programming-with-data.html#basic-programming-concepts-in-r"><i class="fa fa-check"></i><b>2.5</b> Basic programming concepts in R</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="programming-with-data.html"><a href="programming-with-data.html#loops"><i class="fa fa-check"></i><b>2.5.1</b> Loops</a></li>
<li class="chapter" data-level="2.5.2" data-path="programming-with-data.html"><a href="programming-with-data.html#for-loops"><i class="fa fa-check"></i><b>2.5.2</b> For-loops</a></li>
<li class="chapter" data-level="2.5.3" data-path="programming-with-data.html"><a href="programming-with-data.html#booleans-and-logical-statements"><i class="fa fa-check"></i><b>2.5.3</b> Booleans and logical statements</a></li>
<li class="chapter" data-level="2.5.4" data-path="programming-with-data.html"><a href="programming-with-data.html#r-functions"><i class="fa fa-check"></i><b>2.5.4</b> R functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#processing-data-simple-calculations-in-numeral-systems"><i class="fa fa-check"></i><b>3.1</b> Processing data: simple calculations in numeral systems</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#the-binary-system"><i class="fa fa-check"></i><b>3.1.1</b> The binary system</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#the-hexadecimal-system"><i class="fa fa-check"></i><b>3.1.2</b> The hexadecimal system</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#character-encoding"><i class="fa fa-check"></i><b>3.2</b> Character encoding</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#computer-code-and-text-files"><i class="fa fa-check"></i><b>3.3</b> Computer code and text files</a></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#data-processing-basics"><i class="fa fa-check"></i><b>3.4</b> Data processing basics</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data.html"><a href="data.html#components-of-a-standard-computing-environment"><i class="fa fa-check"></i><b>3.4.1</b> Components of a standard computing environment</a></li>
<li class="chapter" data-level="3.4.2" data-path="data.html"><a href="data.html#illustration"><i class="fa fa-check"></i><b>3.4.2</b> Illustration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html"><i class="fa fa-check"></i><b>4</b> Data Storage and Data Structures</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#unstructured-data-in-text-files"><i class="fa fa-check"></i><b>4.1</b> Unstructured data in text files</a></li>
<li class="chapter" data-level="4.2" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#structured-data-formats"><i class="fa fa-check"></i><b>4.2</b> Structured data formats</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#csvs-and-fixed-width-format"><i class="fa fa-check"></i><b>4.2.1</b> CSVs and fixed-width format</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#units-of-informationdata-storage"><i class="fa fa-check"></i><b>4.3</b> Units of information/data storage</a></li>
<li class="chapter" data-level="4.4" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#data-structures-and-data-types-in-r"><i class="fa fa-check"></i><b>4.4</b> Data structures and data types in R</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#data-types"><i class="fa fa-check"></i><b>4.4.1</b> Data types</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#data-structures"><i class="fa fa-check"></i><b>4.4.2</b> Data structures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html"><i class="fa fa-check"></i><b>5</b> High-Dimensional Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#deciphering-xml"><i class="fa fa-check"></i><b>5.1</b> Deciphering XML</a></li>
<li class="chapter" data-level="5.2" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#deciphering-json"><i class="fa fa-check"></i><b>5.2</b> Deciphering JSON</a></li>
<li class="chapter" data-level="5.3" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#parsing-xml-and-json-in-r"><i class="fa fa-check"></i><b>5.3</b> Parsing XML and JSON in R</a></li>
<li class="chapter" data-level="5.4" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#html"><i class="fa fa-check"></i><b>5.4</b> HTML</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#write-a-simple-webpage-with-html"><i class="fa fa-check"></i><b>5.4.1</b> Write a simple webpage with HTML</a></li>
<li class="chapter" data-level="5.4.2" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#two-ways-to-read-a-webpage-into-r"><i class="fa fa-check"></i><b>5.4.2</b> Two ways to read a webpage into R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="text-data.html"><a href="text-data.html"><i class="fa fa-check"></i><b>6</b> Text Data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="text-data.html"><a href="text-data.html#introduction-1"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="text-data.html"><a href="text-data.html#one-package-to-rule-them-all-quanteda"><i class="fa fa-check"></i><b>6.2</b> One Package To Rule Them All: Quanteda</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="text-data.html"><a href="text-data.html#from-raw-text-to-corpus-step-1"><i class="fa fa-check"></i><b>6.2.1</b> From raw text to corpus: step (1)</a></li>
<li class="chapter" data-level="6.2.2" data-path="text-data.html"><a href="text-data.html#from-corpus-to-tokens-steps-2-and-3"><i class="fa fa-check"></i><b>6.2.2</b> From corpus to tokens: steps (2) and (3)</a></li>
<li class="chapter" data-level="6.2.3" data-path="text-data.html"><a href="text-data.html#from-tokens-to-document-term-matrix-dtm-steps-3-and-4"><i class="fa fa-check"></i><b>6.2.3</b> From tokens to document-term-matrix (dtm): steps (3) and (4)</a></li>
<li class="chapter" data-level="6.2.4" data-path="text-data.html"><a href="text-data.html#from-dtm-to-analysis-and-insights"><i class="fa fa-check"></i><b>6.2.4</b> From dtm to analysis and insights</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="image-data.html"><a href="image-data.html"><i class="fa fa-check"></i><b>7</b> Image data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="image-data.html"><a href="image-data.html#image-data-structure-and-storage"><i class="fa fa-check"></i><b>7.1</b> Image data structure and storage</a></li>
<li class="chapter" data-level="7.2" data-path="image-data.html"><a href="image-data.html#raster-images-in-r"><i class="fa fa-check"></i><b>7.2</b> Raster images in R</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="image-data.html"><a href="image-data.html#basic-data-structure"><i class="fa fa-check"></i><b>7.2.1</b> Basic data structure</a></li>
<li class="chapter" data-level="7.2.2" data-path="image-data.html"><a href="image-data.html#advanced-image-manipulation-using-imagemagick"><i class="fa fa-check"></i><b>7.2.2</b> Advanced Image Manipulation using ImageMagick</a></li>
<li class="chapter" data-level="7.2.3" data-path="image-data.html"><a href="image-data.html#optical-character-recognition"><i class="fa fa-check"></i><b>7.2.3</b> Optical Character Recognition</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="image-data.html"><a href="image-data.html#vector-images-in-r"><i class="fa fa-check"></i><b>7.3</b> Vector Images in R</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html"><i class="fa fa-check"></i><b>8</b> Data Sources, Data Gathering, Data Import</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#sourcesformats"><i class="fa fa-check"></i><b>8.1</b> Sources/formats</a></li>
<li class="chapter" data-level="8.2" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#data-gathering-procedure"><i class="fa fa-check"></i><b>8.2</b> Data gathering procedure</a></li>
<li class="chapter" data-level="8.3" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#loadingimporting-rectangular-data"><i class="fa fa-check"></i><b>8.3</b> Loading/importing rectangular data</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#loading-built-in-datasets"><i class="fa fa-check"></i><b>8.3.1</b> Loading built-in datasets</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#importing-rectangular-data-from-text-files"><i class="fa fa-check"></i><b>8.3.2</b> Importing rectangular data from text-files</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#import-and-parse-with-readr"><i class="fa fa-check"></i><b>8.4</b> Import and parse with <code>readr</code></a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#basic-usage-of-readr-functions"><i class="fa fa-check"></i><b>8.4.1</b> Basic usage of <code>readr</code> functions</a></li>
<li class="chapter" data-level="8.4.2" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#parsing-and-data-types"><i class="fa fa-check"></i><b>8.4.2</b> Parsing and data types</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#importing-web-data-formats"><i class="fa fa-check"></i><b>8.5</b> Importing web data formats</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#xml-in-r"><i class="fa fa-check"></i><b>8.5.1</b> XML in R</a></li>
<li class="chapter" data-level="8.5.2" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#json-in-r"><i class="fa fa-check"></i><b>8.5.2</b> JSON in R</a></li>
<li class="chapter" data-level="8.5.3" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#tutorial-advanced-importing-data-from-a-html-table-on-a-website"><i class="fa fa-check"></i><b>8.5.3</b> Tutorial (advanced): Importing data from a HTML table (on a website)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="data-preparation.html"><a href="data-preparation.html"><i class="fa fa-check"></i><b>9</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="data-preparation.html"><a href="data-preparation.html#cleaning-data-with-basic-string-operations"><i class="fa fa-check"></i><b>9.1</b> Cleaning data with basic string operations</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="data-preparation.html"><a href="data-preparation.html#findreplace-character-strings-recode-factor-levels"><i class="fa fa-check"></i><b>9.1.1</b> Find/replace character strings, recode factor levels</a></li>
<li class="chapter" data-level="9.1.2" data-path="data-preparation.html"><a href="data-preparation.html#removing-individual-characters-from-a-string"><i class="fa fa-check"></i><b>9.1.2</b> Removing individual characters from a string</a></li>
<li class="chapter" data-level="9.1.3" data-path="data-preparation.html"><a href="data-preparation.html#splitting-strings"><i class="fa fa-check"></i><b>9.1.3</b> Splitting strings</a></li>
<li class="chapter" data-level="9.1.4" data-path="data-preparation.html"><a href="data-preparation.html#parsing-dates"><i class="fa fa-check"></i><b>9.1.4</b> Parsing dates</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="data-preparation.html"><a href="data-preparation.html#reshaping-datasets"><i class="fa fa-check"></i><b>9.2</b> Reshaping datasets</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="data-preparation.html"><a href="data-preparation.html#tidying-messy-datasets."><i class="fa fa-check"></i><b>9.2.1</b> Tidying messy datasets.</a></li>
<li class="chapter" data-level="9.2.2" data-path="data-preparation.html"><a href="data-preparation.html#pivoting-from-wide-to-long"><i class="fa fa-check"></i><b>9.2.2</b> Pivoting from ‘wide to long’</a></li>
<li class="chapter" data-level="9.2.3" data-path="data-preparation.html"><a href="data-preparation.html#pivoting-from-long-to-wide-spreading"><i class="fa fa-check"></i><b>9.2.3</b> Pivoting from ‘long to wide’ (“spreading”)</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="data-preparation.html"><a href="data-preparation.html#tutorial-hotel-bookings-time-series"><i class="fa fa-check"></i><b>9.3</b> Tutorial: Hotel Bookings Time Series</a></li>
<li class="chapter" data-level="9.4" data-path="data-preparation.html"><a href="data-preparation.html#set-up-and-import"><i class="fa fa-check"></i><b>9.4</b> Set up and import</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html"><i class="fa fa-check"></i><b>10</b> Data Analysis: First Steps</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#mergingjoining-datasets"><i class="fa fa-check"></i><b>10.1</b> Merging/joining datasets</a></li>
<li class="chapter" data-level="10.2" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#selecting-subsets"><i class="fa fa-check"></i><b>10.2</b> Selecting subsets</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#filtering-datasets"><i class="fa fa-check"></i><b>10.2.1</b> Filtering datasets</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#mutating-datasets"><i class="fa fa-check"></i><b>10.2.2</b> Mutating datasets</a></li>
<li class="chapter" data-level="10.2.3" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#aggregation-and-summary-statistics"><i class="fa fa-check"></i><b>10.2.3</b> Aggregation and summary statistics</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#tutorial-analise-messy-excel-sheets"><i class="fa fa-check"></i><b>10.3</b> Tutorial: Analise messy Excel sheets</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#preparatory-steps"><i class="fa fa-check"></i><b>10.3.1</b> Preparatory steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html"><i class="fa fa-check"></i><b>11</b> Basic Econometrics in R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#statistical-modeling"><i class="fa fa-check"></i><b>11.1</b> Statistical modeling</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#illustration-with-pseudo-data"><i class="fa fa-check"></i><b>11.1.1</b> Illustration with pseudo-data</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#estimation-and-application"><i class="fa fa-check"></i><b>11.2</b> Estimation and Application</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#model-specification"><i class="fa fa-check"></i><b>11.2.1</b> Model specification</a></li>
<li class="chapter" data-level="11.2.2" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#raw-data"><i class="fa fa-check"></i><b>11.2.2</b> Raw data</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#derivation-and-implementation-of-ols-estimator"><i class="fa fa-check"></i><b>11.3</b> Derivation and implementation of OLS estimator</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#regression-toolbox-in-r"><i class="fa fa-check"></i><b>11.3.1</b> Regression toolbox in R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>12</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="12.1" data-path="data-visualization.html"><a href="data-visualization.html#data-display"><i class="fa fa-check"></i><b>12.1</b> Data display</a></li>
<li class="chapter" data-level="12.2" data-path="data-visualization.html"><a href="data-visualization.html#data-visualization-with-ggplot2"><i class="fa fa-check"></i><b>12.2</b> Data visualization with <code>ggplot2</code></a></li>
<li class="chapter" data-level="12.3" data-path="data-visualization.html"><a href="data-visualization.html#grammar-of-graphics"><i class="fa fa-check"></i><b>12.3</b> ‘Grammar of Graphics’</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2-basics"><i class="fa fa-check"></i><b>12.3.1</b> <code>ggplot2</code> basics</a></li>
<li class="chapter" data-level="12.3.2" data-path="data-visualization.html"><a href="data-visualization.html#tutorial"><i class="fa fa-check"></i><b>12.3.2</b> Tutorial</a></li>
<li class="chapter" data-level="12.3.3" data-path="data-visualization.html"><a href="data-visualization.html#loadingpreparing-the-data"><i class="fa fa-check"></i><b>12.3.3</b> Loading/preparing the data</a></li>
<li class="chapter" data-level="12.3.4" data-path="data-visualization.html"><a href="data-visualization.html#geometries-type-of-plot"><i class="fa fa-check"></i><b>12.3.4</b> Geometries (~ type of plot)</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="data-visualization.html"><a href="data-visualization.html#dynamic-documents"><i class="fa fa-check"></i><b>12.4</b> Dynamic documents</a></li>
<li class="chapter" data-level="12.5" data-path="data-visualization.html"><a href="data-visualization.html#tutorial-how-to-give-the-wrong-impression-with-data-visualization"><i class="fa fa-check"></i><b>12.5</b> Tutorial: How to give the wrong impression with data visualization</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="data-visualization.html"><a href="data-visualization.html#background-and-aim"><i class="fa fa-check"></i><b>12.5.1</b> Background and aim</a></li>
<li class="chapter" data-level="12.5.2" data-path="data-visualization.html"><a href="data-visualization.html#data-import-and-preparation"><i class="fa fa-check"></i><b>12.5.2</b> Data import and preparation</a></li>
<li class="chapter" data-level="12.5.3" data-path="data-visualization.html"><a href="data-visualization.html#plot"><i class="fa fa-check"></i><b>12.5.3</b> Plot</a></li>
<li class="chapter" data-level="12.5.4" data-path="data-visualization.html"><a href="data-visualization.html#cosmetics-theme"><i class="fa fa-check"></i><b>12.5.4</b> Cosmetics: theme</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a.html"><a href="appendix-a.html"><i class="fa fa-check"></i><b>A</b> Appendix A</a>
<ul>
<li class="chapter" data-level="A.1" data-path="appendix-a.html"><a href="appendix-a.html#understanding-statistics-and-probability-with-code"><i class="fa fa-check"></i><b>A.1</b> Understanding statistics and probability with code</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="appendix-a.html"><a href="appendix-a.html#random-draws-and-distributions"><i class="fa fa-check"></i><b>A.1.1</b> Random draws and distributions</a></li>
<li class="chapter" data-level="A.1.2" data-path="appendix-a.html"><a href="appendix-a.html#illustration-of-variability"><i class="fa fa-check"></i><b>A.1.2</b> Illustration of variability</a></li>
<li class="chapter" data-level="A.1.3" data-path="appendix-a.html"><a href="appendix-a.html#skewness-and-kurtosis"><i class="fa fa-check"></i><b>A.1.3</b> Skewness and Kurtosis</a></li>
<li class="chapter" data-level="A.1.4" data-path="appendix-a.html"><a href="appendix-a.html#the-law-of-large-numbers"><i class="fa fa-check"></i><b>A.1.4</b> The Law of Large Numbers</a></li>
<li class="chapter" data-level="A.1.5" data-path="appendix-a.html"><a href="appendix-a.html#the-central-limit-theorem"><i class="fa fa-check"></i><b>A.1.5</b> The Central Limit Theorem</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://umatter.github.io" target="blank">umatter.github.io</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Handling Pocket Reference</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="high-dimensional-data" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> High-Dimensional Data<a href="high-dimensional-data.html#high-dimensional-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>So far, we have only looked at data structured in a flat/table-like representation (e.g. CSV files). In applied econometrics/statistics, it is common to only work with data sets stored in such format. Data manipulation, filtering, aggregation, etc. presupposes data in a table-like format. Hence, storing data in this format makes perfect sense.</p>
<p>As we observed in the previous chapter, the CSV structure has some disadvantages when representing more complex data in a text file. This is in particular true if the data contains nested observations (i.e., hierarchical structures). While a representation in a CSV file is theoretically possible, it is often far from practical to use other formats for such data. On the one hand, it is likely less intuitive to read the data correctly. On the other hand, storing the data in a CSV file might introduce a lot of redundancy. That is, the identical values of some variables would have to be repeated in the same column. The following code block illustrates this point for a data set on two families (<span class="citation">(<a href="references.html#ref-murrell_2009" role="doc-biblioref">Murrell 2009</a>)</span>, p. 116).</p>
<pre><code>father mother  name     age  gender
               John      33  male
               Julia     32  female
John   Julia   Jack       6  male
John   Julia   Jill       4  female
John   Julia   John jnr   2  male
               David     45  male
               Debbie    42  female
David  Debbie  Donald    16  male
David  Debbie  Dianne    12  female
</code></pre>
<p>From simply looking at the data, we can make the best guess which observations belong together (are one family). However, the implied hierarchy is not apparent at first sight. While it might not matter too much that several values have to be repeated several times in this format, given that this data set is so small, the repeated values can become a problem when the data set is much larger. For each time <code>John</code> is repeated in the <code>father</code>column, we use 4 bytes of memory. Suppose millions of people are in this data set, and we have to transfer this data set very often over a computer network. In that case, these repetitions can become quite costly (as we would need more storage capacity and network resources).</p>
<p>Issues with complex/hierarchical data (with several observation types), intuitive human readability (self-describing), and efficiency in storage, as well as transfer, are all of great importance on the Web. In the context of web technologies, several data formats have been put forward to address these issues. Here, we discuss the two most prominent of these formats: <a href="https://en.wikipedia.org/wiki/XML">Extensible Markup Language (XML)</a> and <a href="https://en.wikipedia.org/wiki/JSON">JavaScript Object Notation (JSON)</a>.</p>
<div id="deciphering-xml" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Deciphering XML<a href="high-dimensional-data.html#deciphering-xml" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before going into more technical details, let’s try to figure out the basic logic behind the XML format by simply looking at some raw example data. For this, we turn to the Point Nemo case study in <span class="citation">(<a href="references.html#ref-murrell_2009" role="doc-biblioref">Murrell 2009</a>)</span>. The following code block shows the upper part of the data set downloaded from NASA’s LAS server (here in a CSV-type format).</p>
<pre><code>             VARIABLE : Monthly Surface Clear-sky Temperature (ISCCP) (Celsius)
             FILENAME : ISCCPMonthly_avg.nc
             FILEPATH : /usr/local/fer_data/data/
             BAD FLAG : -1.E+34       
             SUBSET   : 48 points (TIME)
             LONGITUDE: 123.8W(-123.8)
             LATITUDE : 48.8S
             123.8W
16-JAN-1994 00    9.200012
16-FEB-1994 00    10.70001
16-MAR-1994 00    7.5
16-APR-1994 00    8.100006</code></pre>
<p>Below, the same data is now displayed in XML format. Note that in both cases, the data is simply stored in a text file. However, it is stored in a format that imposes a different <em>structure</em> on the data.</p>
<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;temperatures&gt;
&lt;variable&gt;Monthly Surface Clear-sky Temperature (ISCCP) (Celsius)&lt;/variable&gt;
&lt;filename&gt;ISCCPMonthly_avg.nc&lt;/filename&gt;
&lt;filepath&gt;/usr/local/fer_data/data/&lt;/filepath&gt;
&lt;badflag&gt;-1.E+34&lt;/badflag&gt;

&lt;subset&gt;48 points (TIME)&lt;/subset&gt;
&lt;longitude&gt;123.8W(-123.8)&lt;/longitude&gt;
&lt;latitude&gt;48.8S&lt;/latitude&gt;
&lt;case date=&quot;16-JAN-1994&quot; temperature=&quot;9.200012&quot; /&gt;
&lt;case date=&quot;16-FEB-1994&quot; temperature=&quot;10.70001&quot; /&gt;
&lt;case date=&quot;16-MAR-1994&quot; temperature=&quot;7.5&quot; /&gt;
&lt;case date=&quot;16-APR-1994&quot; temperature=&quot;8.100006&quot; /&gt;

...
&lt;/temperatures&gt;</code></pre>
<p>What features does the format have? What is its logic? Is there room for improvement? The XML data structure becomes more apparent by using indentation and code highlighting.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb146-1"><a href="high-dimensional-data.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">&quot;1.0&quot;</span><span class="fu">?&gt;</span></span>
<span id="cb146-2"><a href="high-dimensional-data.html#cb146-2" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">temperatures</span>&gt;</span>
<span id="cb146-3"><a href="high-dimensional-data.html#cb146-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">variable</span>&gt;Monthly Surface Clear-sky Temperature (ISCCP) (Celsius)&lt;/<span class="kw">variable</span>&gt;</span>
<span id="cb146-4"><a href="high-dimensional-data.html#cb146-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">filename</span>&gt;ISCCPMonthly_avg.nc&lt;/<span class="kw">filename</span>&gt;</span>
<span id="cb146-5"><a href="high-dimensional-data.html#cb146-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">filepath</span>&gt;/usr/local/fer_data/data/&lt;/<span class="kw">filepath</span>&gt;</span>
<span id="cb146-6"><a href="high-dimensional-data.html#cb146-6" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">badflag</span>&gt;-1.E+34&lt;/<span class="kw">badflag</span>&gt;</span>
<span id="cb146-7"><a href="high-dimensional-data.html#cb146-7" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">subset</span>&gt;48 points (TIME)&lt;/<span class="kw">subset</span>&gt;</span>
<span id="cb146-8"><a href="high-dimensional-data.html#cb146-8" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">longitude</span>&gt;123.8W(-123.8)&lt;/<span class="kw">longitude</span>&gt;</span>
<span id="cb146-9"><a href="high-dimensional-data.html#cb146-9" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">latitude</span>&gt;48.8S&lt;/<span class="kw">latitude</span>&gt;</span>
<span id="cb146-10"><a href="high-dimensional-data.html#cb146-10" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-JAN-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;9.200012&quot;</span> /&gt;</span>
<span id="cb146-11"><a href="high-dimensional-data.html#cb146-11" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-FEB-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;10.70001&quot;</span> /&gt;</span>
<span id="cb146-12"><a href="high-dimensional-data.html#cb146-12" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-MAR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;7.5&quot;</span> /&gt;</span>
<span id="cb146-13"><a href="high-dimensional-data.html#cb146-13" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-APR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;8.100006&quot;</span> /&gt;</span>
<span id="cb146-14"><a href="high-dimensional-data.html#cb146-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-15"><a href="high-dimensional-data.html#cb146-15" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb146-16"><a href="high-dimensional-data.html#cb146-16" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">temperatures</span>&gt;</span></code></pre></div>
<p>First, note how special characters are used to define the document’s structure. We notice that <code>&lt;</code> and <code>&gt;</code>, containing some text labels seem to play a key role in defining the structure. These building blocks are called ‘XML tags’. We are free to choose what tags we want to use. In essence, we can define them ourselves to most properly describe the data. Moreover, the example data reveals the flexibility of XML to depict hierarchical structures.</p>
<p>The actual content we know from the CSV-type example above is nested between the ‘<code>temperatures</code>’-tags, indicating what the data is about.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb147-1"><a href="high-dimensional-data.html#cb147-1" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">temperatures</span>&gt;</span>
<span id="cb147-2"><a href="high-dimensional-data.html#cb147-2" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb147-3"><a href="high-dimensional-data.html#cb147-3" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">temperatures</span>&gt;</span></code></pre></div>
<p>Comparing the actual content between these tags with the CSV-type format above, we further recognize that there are two principal ways to link variable names to values.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb148-1"><a href="high-dimensional-data.html#cb148-1" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">variable</span>&gt;Monthly Surface Clear-sky Temperature (ISCCP) (Celsius)&lt;/<span class="kw">variable</span>&gt;</span>
<span id="cb148-2"><a href="high-dimensional-data.html#cb148-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">filename</span>&gt;ISCCPMonthly_avg.nc&lt;/<span class="kw">filename</span>&gt;</span>
<span id="cb148-3"><a href="high-dimensional-data.html#cb148-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">filepath</span>&gt;/usr/local/fer_data/data/&lt;/<span class="kw">filepath</span>&gt;</span>
<span id="cb148-4"><a href="high-dimensional-data.html#cb148-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">badflag</span>&gt;-1.E+34&lt;/<span class="kw">badflag</span>&gt;</span>
<span id="cb148-5"><a href="high-dimensional-data.html#cb148-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">subset</span>&gt;48 points (TIME)&lt;/<span class="kw">subset</span>&gt;</span>
<span id="cb148-6"><a href="high-dimensional-data.html#cb148-6" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">longitude</span>&gt;123.8W(-123.8)&lt;/<span class="kw">longitude</span>&gt;</span>
<span id="cb148-7"><a href="high-dimensional-data.html#cb148-7" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">latitude</span>&gt;48.8S&lt;/<span class="kw">latitude</span>&gt;</span>
<span id="cb148-8"><a href="high-dimensional-data.html#cb148-8" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-JAN-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;9.200012&quot;</span> /&gt;</span>
<span id="cb148-9"><a href="high-dimensional-data.html#cb148-9" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-FEB-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;10.70001&quot;</span> /&gt;</span>
<span id="cb148-10"><a href="high-dimensional-data.html#cb148-10" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-MAR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;7.5&quot;</span> /&gt;</span>
<span id="cb148-11"><a href="high-dimensional-data.html#cb148-11" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-APR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;8.100006&quot;</span> /&gt;</span></code></pre></div>
<p>One way is to define opening and closing XML-tags with the variable name and surround the value with them, such as in <code>&lt;filename&gt;ISCCPMonthly_avg.nc&lt;/filename&gt;</code>. Another way would be to encapsulate the values within one tag by defining tag attributes such as in <code>&lt;case date="16-JAN-1994" temperature="9.200012" /&gt;</code>. In many situations, both approaches can make sense. For example, the way the temperature measurements are encoded in the example data set is based on the tag-attributes approach:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb149-1"><a href="high-dimensional-data.html#cb149-1" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-JAN-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;9.200012&quot;</span> /&gt;</span>
<span id="cb149-2"><a href="high-dimensional-data.html#cb149-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-FEB-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;10.70001&quot;</span> /&gt;</span>
<span id="cb149-3"><a href="high-dimensional-data.html#cb149-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-MAR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;7.5&quot;</span> /&gt;</span>
<span id="cb149-4"><a href="high-dimensional-data.html#cb149-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span><span class="ot"> date=</span><span class="st">&quot;16-APR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;8.100006&quot;</span> /&gt;</span></code></pre></div>
<p>We could rewrite this by only using XML tags and no attributes:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb150-1"><a href="high-dimensional-data.html#cb150-1" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">cases</span>&gt;    </span>
<span id="cb150-2"><a href="high-dimensional-data.html#cb150-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span>&gt;</span>
<span id="cb150-3"><a href="high-dimensional-data.html#cb150-3" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">date</span>&gt;16-JAN-1994&lt;<span class="kw">date</span>/&gt;</span>
<span id="cb150-4"><a href="high-dimensional-data.html#cb150-4" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">temperature</span>&gt;9.200012&lt;<span class="kw">temperature</span>/&gt;</span>
<span id="cb150-5"><a href="high-dimensional-data.html#cb150-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span>/&gt;</span>
<span id="cb150-6"><a href="high-dimensional-data.html#cb150-6" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span>&gt;</span>
<span id="cb150-7"><a href="high-dimensional-data.html#cb150-7" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">date</span>&gt;16-FEB-1994&lt;<span class="kw">date</span>/&gt;</span>
<span id="cb150-8"><a href="high-dimensional-data.html#cb150-8" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">temperature</span>&gt;10.70001&lt;<span class="kw">temperature</span>/&gt;</span>
<span id="cb150-9"><a href="high-dimensional-data.html#cb150-9" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span>/&gt;</span>
<span id="cb150-10"><a href="high-dimensional-data.html#cb150-10" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span>&gt;</span>
<span id="cb150-11"><a href="high-dimensional-data.html#cb150-11" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">date</span>&gt;16-MAR-1994&lt;<span class="kw">date</span>/&gt;</span>
<span id="cb150-12"><a href="high-dimensional-data.html#cb150-12" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">temperature</span>&gt;7.5&lt;<span class="kw">temperature</span>/&gt;</span>
<span id="cb150-13"><a href="high-dimensional-data.html#cb150-13" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span>/&gt;</span>
<span id="cb150-14"><a href="high-dimensional-data.html#cb150-14" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span>&gt;</span>
<span id="cb150-15"><a href="high-dimensional-data.html#cb150-15" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">date</span>&gt;16-APR-1994&lt;<span class="kw">date</span>/&gt;</span>
<span id="cb150-16"><a href="high-dimensional-data.html#cb150-16" aria-hidden="true" tabindex="-1"></a>      &lt;<span class="kw">temperature</span>&gt;8.100006&lt;<span class="kw">temperature</span>/&gt;</span>
<span id="cb150-17"><a href="high-dimensional-data.html#cb150-17" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">case</span>/&gt;</span>
<span id="cb150-18"><a href="high-dimensional-data.html#cb150-18" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">cases</span>/&gt;</span></code></pre></div>
<p>As long as we follow the basic XML syntax, both versions are valid, and XML parsers can read them equally well.</p>
<p>Note the key differences between storing data in XML format in contrast to a flat, table-like format such as CSV:</p>
<ul>
<li>Storing the actual data and metadata in the same file is straightforward (as the above example illustrates). Storing metadata in the first lines of a CSV file (such as in the example above) is theoretically possible. However, by doing so, we break the CSV syntax, and a CSV-parser would likely break down when reading such a file (recall the simple CSV parsing algorithm). More generally, we can represent much more <em>complex (multi-dimensional)</em> data in XML files than what is possible in CSVs. In fact, the nesting structure can be arbitrarily complex as long as the XML syntax is valid.</li>
<li>The XML syntax is largely self-explanatory and thus both <em>machine-readable and human-readable</em>. That is, not only can parsers/computers more easily handle complex data structures, but human readers can intuitively understand what the data is all about by looking at the raw XML file.</li>
</ul>
<p>A potential drawback of storing data in XML format is that variable names (in tags) are repeated. Since each tag consists of a couple of bytes, this can be highly inefficient compared to a table-like format where variable names are only defined once. Typically, this means that if the data at hand is only two-dimensional (observations/variables), a CSV format makes more sense.</p>
</div>
<div id="deciphering-json" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Deciphering JSON<a href="high-dimensional-data.html#deciphering-json" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In many web applications, JSON serves the same purpose as XML<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a>. An obvious difference between the two conventions is that JSON does not use tags but attribute-value pairs to annotate data. The following code example shows how the same data can be represented in XML or in JSON (example code taken from <a href="https://en.wikipedia.org/wiki/JSON" class="uri">https://en.wikipedia.org/wiki/JSON</a>):</p>
<p><em>XML:</em></p>
<div class="sourceCode" id="cb151"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb151-1"><a href="high-dimensional-data.html#cb151-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">person</span>&gt;</span>
<span id="cb151-2"><a href="high-dimensional-data.html#cb151-2" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">firstName</span>&gt;John&lt;/<span class="kw">firstName</span>&gt;</span>
<span id="cb151-3"><a href="high-dimensional-data.html#cb151-3" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastName</span>&gt;Smith&lt;/<span class="kw">lastName</span>&gt;</span>
<span id="cb151-4"><a href="high-dimensional-data.html#cb151-4" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">age</span>&gt;25&lt;/<span class="kw">age</span>&gt;</span>
<span id="cb151-5"><a href="high-dimensional-data.html#cb151-5" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">address</span>&gt;</span>
<span id="cb151-6"><a href="high-dimensional-data.html#cb151-6" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">streetAddress</span>&gt;21 2nd Street&lt;/<span class="kw">streetAddress</span>&gt;</span>
<span id="cb151-7"><a href="high-dimensional-data.html#cb151-7" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">city</span>&gt;New York&lt;/<span class="kw">city</span>&gt;</span>
<span id="cb151-8"><a href="high-dimensional-data.html#cb151-8" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">state</span>&gt;NY&lt;/<span class="kw">state</span>&gt;</span>
<span id="cb151-9"><a href="high-dimensional-data.html#cb151-9" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">postalCode</span>&gt;10021&lt;/<span class="kw">postalCode</span>&gt;</span>
<span id="cb151-10"><a href="high-dimensional-data.html#cb151-10" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">address</span>&gt;</span>
<span id="cb151-11"><a href="high-dimensional-data.html#cb151-11" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">phoneNumber</span>&gt;</span>
<span id="cb151-12"><a href="high-dimensional-data.html#cb151-12" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">type</span>&gt;home&lt;/<span class="kw">type</span>&gt;</span>
<span id="cb151-13"><a href="high-dimensional-data.html#cb151-13" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">number</span>&gt;212 555-1234&lt;/<span class="kw">number</span>&gt;</span>
<span id="cb151-14"><a href="high-dimensional-data.html#cb151-14" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">phoneNumber</span>&gt;</span>
<span id="cb151-15"><a href="high-dimensional-data.html#cb151-15" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">phoneNumber</span>&gt;</span>
<span id="cb151-16"><a href="high-dimensional-data.html#cb151-16" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">type</span>&gt;fax&lt;/<span class="kw">type</span>&gt;</span>
<span id="cb151-17"><a href="high-dimensional-data.html#cb151-17" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">number</span>&gt;646 555-4567&lt;/<span class="kw">number</span>&gt;</span>
<span id="cb151-18"><a href="high-dimensional-data.html#cb151-18" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">phoneNumber</span>&gt;</span>
<span id="cb151-19"><a href="high-dimensional-data.html#cb151-19" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">gender</span>&gt;</span>
<span id="cb151-20"><a href="high-dimensional-data.html#cb151-20" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">type</span>&gt;male&lt;/<span class="kw">type</span>&gt;</span>
<span id="cb151-21"><a href="high-dimensional-data.html#cb151-21" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">gender</span>&gt;</span>
<span id="cb151-22"><a href="high-dimensional-data.html#cb151-22" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">person</span>&gt;</span></code></pre></div>
<p><em>JSON:</em></p>
<div class="sourceCode" id="cb152"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb152-1"><a href="high-dimensional-data.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;firstName&quot;</span><span class="fu">:</span> <span class="st">&quot;John&quot;</span><span class="fu">,</span></span>
<span id="cb152-2"><a href="high-dimensional-data.html#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;lastName&quot;</span><span class="fu">:</span> <span class="st">&quot;Smith&quot;</span><span class="fu">,</span></span>
<span id="cb152-3"><a href="high-dimensional-data.html#cb152-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;age&quot;</span><span class="fu">:</span> <span class="dv">25</span><span class="fu">,</span></span>
<span id="cb152-4"><a href="high-dimensional-data.html#cb152-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;address&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb152-5"><a href="high-dimensional-data.html#cb152-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;streetAddress&quot;</span><span class="fu">:</span> <span class="st">&quot;21 2nd Street&quot;</span><span class="fu">,</span></span>
<span id="cb152-6"><a href="high-dimensional-data.html#cb152-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;city&quot;</span><span class="fu">:</span> <span class="st">&quot;New York&quot;</span><span class="fu">,</span></span>
<span id="cb152-7"><a href="high-dimensional-data.html#cb152-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;state&quot;</span><span class="fu">:</span> <span class="st">&quot;NY&quot;</span><span class="fu">,</span></span>
<span id="cb152-8"><a href="high-dimensional-data.html#cb152-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;postalCode&quot;</span><span class="fu">:</span> <span class="st">&quot;10021&quot;</span></span>
<span id="cb152-9"><a href="high-dimensional-data.html#cb152-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb152-10"><a href="high-dimensional-data.html#cb152-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;phoneNumber&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb152-11"><a href="high-dimensional-data.html#cb152-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb152-12"><a href="high-dimensional-data.html#cb152-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;home&quot;</span><span class="fu">,</span></span>
<span id="cb152-13"><a href="high-dimensional-data.html#cb152-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;number&quot;</span><span class="fu">:</span> <span class="st">&quot;212 555-1234&quot;</span></span>
<span id="cb152-14"><a href="high-dimensional-data.html#cb152-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb152-15"><a href="high-dimensional-data.html#cb152-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb152-16"><a href="high-dimensional-data.html#cb152-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;fax&quot;</span><span class="fu">,</span></span>
<span id="cb152-17"><a href="high-dimensional-data.html#cb152-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;number&quot;</span><span class="fu">:</span> <span class="st">&quot;646 555-4567&quot;</span></span>
<span id="cb152-18"><a href="high-dimensional-data.html#cb152-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb152-19"><a href="high-dimensional-data.html#cb152-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb152-20"><a href="high-dimensional-data.html#cb152-20" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gender&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb152-21"><a href="high-dimensional-data.html#cb152-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;male&quot;</span></span>
<span id="cb152-22"><a href="high-dimensional-data.html#cb152-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb152-23"><a href="high-dimensional-data.html#cb152-23" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Note that despite the syntax differences, the similarities regarding the nesting structure are visible in both formats. For example, <code>postalCode</code> is embedded in <code>address</code>, <code>firstname</code> and <code>lastname</code> are at the same nesting level, etc. The following figure, illustrating the nesting structure further illustrates this point. The basic logic of what element belongs to which higher-level element displayed in the tree diagramm is encoded in both the JSON and the XML excerpts shown above.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xmltree"></span>
<img src="img/hierarch_data.svg" alt="XML tree diagram." width="75%" />
<p class="caption">
Figure 5.1: XML tree diagram.
</p>
</div>

<p>Both XML and JSON are predominantly used to store rather complex, multi-dimensional data. Because they are both human- and machine-readable, these formats are often used to transfer data between applications and users on the Web. Therefore, we encounter these data formats particularly often when we collect data from online sources. Moreover, in the economics/social science context, large and complex data sets (‘Big Data’) often come along in these formats exactly because of the increasing importance of the Internet as a data source for empirical research in these disciplines.</p>
</div>
<div id="parsing-xml-and-json-in-r" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Parsing XML and JSON in R<a href="high-dimensional-data.html#parsing-xml-and-json-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As in the case of CSV-like formats, there are several parsers in R that we can use to read XML and JSON data. The following examples are based on the example code shown above (the two text-files <code>persons.json</code> and <code>persons.xml</code>)</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="high-dimensional-data.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb153-2"><a href="high-dimensional-data.html#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb153-3"><a href="high-dimensional-data.html#cb153-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-4"><a href="high-dimensional-data.html#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="co"># parse XML, represent XML document as R object</span></span>
<span id="cb153-5"><a href="high-dimensional-data.html#cb153-5" aria-hidden="true" tabindex="-1"></a>xml_doc <span class="ot">&lt;-</span> <span class="fu">read_xml</span>(<span class="st">&quot;persons.xml&quot;</span>)</span>
<span id="cb153-6"><a href="high-dimensional-data.html#cb153-6" aria-hidden="true" tabindex="-1"></a>xml_doc</span></code></pre></div>
<pre><code>## {xml_document}
## &lt;person&gt;
## [1] &lt;firstName&gt;John&lt;/firstName&gt;
## [2] &lt;lastName&gt;Smith&lt;/lastName&gt;
## [3] &lt;age&gt;25&lt;/age&gt;
## [4] &lt;address&gt;\n  &lt;streetAddress&gt;21 2nd Street&lt;/streetAddress&gt;\ ...
## [5] &lt;phoneNumber&gt;\n  &lt;type&gt;home&lt;/type&gt;\n  &lt;number&gt;212 555-1234 ...
## [6] &lt;phoneNumber&gt;\n  &lt;type&gt;fax&lt;/type&gt;\n  &lt;number&gt;646 555-4567&lt; ...
## [7] &lt;gender&gt;\n  &lt;type&gt;male&lt;/type&gt;\n&lt;/gender&gt;</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="high-dimensional-data.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb155-2"><a href="high-dimensional-data.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb155-3"><a href="high-dimensional-data.html#cb155-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-4"><a href="high-dimensional-data.html#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="co"># parse the JSON-document shown in the example above</span></span>
<span id="cb155-5"><a href="high-dimensional-data.html#cb155-5" aria-hidden="true" tabindex="-1"></a>json_doc <span class="ot">&lt;-</span> from <span class="fu">JSON</span>(<span class="st">&quot;persons.json&quot;</span>)</span>
<span id="cb155-6"><a href="high-dimensional-data.html#cb155-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-7"><a href="high-dimensional-data.html#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="co"># check the structure</span></span>
<span id="cb155-8"><a href="high-dimensional-data.html#cb155-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(json_doc)</span></code></pre></div>
<pre><code>## List of 6
##  $ firstName  : chr &quot;John&quot;
##  $ lastName   : chr &quot;Smith&quot;
##  $ age        : int 25
##  $ address    :List of 4
##   ..$ streetAddress: chr &quot;21 2nd Street&quot;
##   ..$ city         : chr &quot;New York&quot;
##   ..$ state        : chr &quot;NY&quot;
##   ..$ postalCode   : chr &quot;10021&quot;
##  $ phoneNumber:&#39;data.frame&#39;: 2 obs. of  2 variables:
##   ..$ type  : chr [1:2] &quot;home&quot; &quot;fax&quot;
##   ..$ number: chr [1:2] &quot;212 555-1234&quot; &quot;646 555-4567&quot;
##  $ gender     :List of 1
##   ..$ type: chr &quot;male&quot;</code></pre>
</div>
<div id="html" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> HTML<a href="high-dimensional-data.html#html" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Recall the data processing example in which we investigated how a webpage can be downloaded, processed, and stored via the R command line. The code constituting a webpage is written in <a href="https://en.wikipedia.org/wiki/HTML">HyperText Markup Language (HTML)</a>, designed to be read in a web browser. Thus, HTML is predominantly designed for visual display in browsers, not for storing data. HTML is used to annotate content and define the hierarchy of content in a document to tell the browser how to display (‘render’) this document on the computer screen. Interestingly for us, its structure is very close to that of XML. However, the tags that can be used are strictly pre-defined and are aimed at explaining the structure of a website.</p>
<p>While not intended as a format to store and transfer data, HTMLdocuments (webpages) have de facto become a very important data source for many data science applications both in industry and academia.<a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a> Note how the two key concepts of computer code and digital data (both residing in a text file) are combined in an HTML document. From a web designer’s perspective, HTML is a tool to design the layout of a webpage (and the resulting HTML document is rather seen as <em>code</em>). On the other hand, from a data scientist’s perspective, HTML gives the data contained in a webpage (the actual content) a certain degree of structure which can be exploited to systematically extract the data from the webpage. In the context of HTML documents/webpages as data sources, we thus also speak of ‘semi-structured data’: a webpage can contain an HTML table (structured data) but likely also contains just raw text (unstructured data). In the following, we explore the basic syntax of HTML by building a simple webpage.</p>
<div id="write-a-simple-webpage-with-html" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Write a simple webpage with HTML<a href="high-dimensional-data.html#write-a-simple-webpage-with-html" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We start by opening a new text-file in RStudio (File-&gt;New File-&gt;TextFile). On the first line, we tell the browser what kind of document this is with the <code>&lt;!DOCTYPE&gt;</code> declaration set to <code>HTML</code>. In addition, the content of the whole HTML document must be put within <code>&lt;html&gt;</code> and <code>&lt;/html&gt;</code>, which represents the ‘root’ of the HTML document. In this, you already recognize the typical (XML-like) annotation style in HTML with so-called HTML tags, starting with <code>&lt;</code> and ending with <code>&gt;</code> or <code>/&gt;</code> in the case of the closing tag, respectively. What is defined between two tags is either another HTML tag or the actual content. An HTML document usually consists of two main components: the head (everything between <code>&lt;head&gt;</code> and <code>&lt;/head&gt;</code> ) and the body. The head typically contains metadata describing the whole document like, the title of the document: <code>&lt;title&gt;hello, world&lt;/title&gt;</code>. The body (everything between <code>&lt;body&gt;</code> and <code>&lt;/body&gt;</code>) contains all kinds of specific content: text, images, tables, links, etc. In our very simple example, we add a few words of plain text. We can now save this text document as <code>mysite.html</code> and open it in a web browser.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb157-1"><a href="high-dimensional-data.html#cb157-1" aria-hidden="true" tabindex="-1"></a>     <span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb157-2"><a href="high-dimensional-data.html#cb157-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-3"><a href="high-dimensional-data.html#cb157-3" aria-hidden="true" tabindex="-1"></a>     <span class="kw">&lt;html&gt;</span></span>
<span id="cb157-4"><a href="high-dimensional-data.html#cb157-4" aria-hidden="true" tabindex="-1"></a>         <span class="kw">&lt;head&gt;</span></span>
<span id="cb157-5"><a href="high-dimensional-data.html#cb157-5" aria-hidden="true" tabindex="-1"></a>             <span class="kw">&lt;title&gt;</span>hello, world<span class="kw">&lt;/title&gt;</span></span>
<span id="cb157-6"><a href="high-dimensional-data.html#cb157-6" aria-hidden="true" tabindex="-1"></a>         <span class="kw">&lt;/head&gt;</span></span>
<span id="cb157-7"><a href="high-dimensional-data.html#cb157-7" aria-hidden="true" tabindex="-1"></a>         <span class="kw">&lt;body&gt;</span></span>
<span id="cb157-8"><a href="high-dimensional-data.html#cb157-8" aria-hidden="true" tabindex="-1"></a>             <span class="kw">&lt;h2&gt;</span> hello, world <span class="kw">&lt;/h2&gt;</span></span>
<span id="cb157-9"><a href="high-dimensional-data.html#cb157-9" aria-hidden="true" tabindex="-1"></a>         <span class="kw">&lt;/body&gt;</span></span>
<span id="cb157-10"><a href="high-dimensional-data.html#cb157-10" aria-hidden="true" tabindex="-1"></a>     <span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>From this example, we can learn a few important characteristics of HTML:</p>
<ol style="list-style-type: decimal">
<li>It becomes apparent how HTML is used to annotate/‘mark up’ data/text (with tags) to define the document’s content, structure, and hierarchy. Thus if we want to know what the title of this document is, we have to look for the <code>&lt;title&gt;</code>-tag.</li>
<li>This systematic structuring adheres to the nesting principle: ‘head’ and ‘body’ are nested within the ‘HTML’ document, at the same hierarchy level. The ‘title’ is defined within the ‘head’, one level lower. In other words, the ‘title’ is a component of the ‘head,’ which is a component of the ‘html’ document. This logic of encapsulating one part in another holds true in all correctly defined HTML documents. This is the type of ‘data structure’ mentioned above, which can be used to extract specific parts of data from HTML documents in a systematic manner.</li>
<li>We recognize that HTML code essentially expresses what is what in a document (note the similarity of the concept to storing data in XML). HTML code does not contain explicit instructions like programming languages, telling the computer what to do. If an HTML document contains a link to another website, all that is needed, is to define (with HTML tag <code>&lt;a href=...&gt;</code>) that this is a link. We do not have to explicitly express something like “if the user clicks on a link, then execute this and that…”.</li>
</ol>
<p>What to do with the HTML document is thus in the hands of the person who works with it. From the data scientist’s perspective, we need to know how to traverse and exploit the structure of an HTML document in order to systematically extract the specific content/data that we are interested in. We thus have to learn how to tell the computer (with R) to extract a specific part of an HTML document. And to do so, we have to acquire a basic understanding of the nesting structure implied by HTML (essentially the same logic as with XML).</p>
<p>One way to think about an HTML document is to imagine it as a tree-diagram, with <code>&lt;html&gt;..&lt;/html&gt;</code> as the ‘root’, <code>&lt;head&gt;...&lt;/head&gt;</code> and <code>&lt;body&gt;...&lt;/body&gt;</code> as the ‘children’ of <code>&lt;html&gt;..&lt;/html&gt;</code> (and ‘siblings’ of each other), <code>&lt;title&gt;...&lt;/title&gt;</code> as the child of <code>&lt;head&gt;...&lt;/head&gt;</code>, etc. Figure <a href="high-dimensional-data.html#fig:html">5.2</a> illustrates this point.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:html"></span>
<img src="img/dom_tree.png" alt="HTML (DOM) tree diagram." width="50%" />
<p class="caption">
Figure 5.2: HTML (DOM) tree diagram.
</p>
</div>

<p>The illustration of the nested structure can help to understand how we can instruct the computer to find/extract a specific part of the data from such a document. In the following exercise, we revisit the example shown in the chapter on data processing to do exactly this.</p>
</div>
<div id="two-ways-to-read-a-webpage-into-r" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Two ways to read a webpage into R<a href="high-dimensional-data.html#two-ways-to-read-a-webpage-into-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this example, we look at <a href="https://en.wikipedia.org/wiki/Economy_of_Switzerland">Wikipedia’s Economy of Switzerland page</a>, which contains the table depicted in Figure <a href="high-dimensional-data.html#fig:swiss">5.3</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:swiss"></span>
<img src="img/1_SwissGDP.png" alt="Source: https://en.wikipedia.org/wiki/Economy_of_Switzerland." width="50%" />
<p class="caption">
Figure 5.3: Source: <a href="https://en.wikipedia.org/wiki/Economy_of_Switzerland" class="uri">https://en.wikipedia.org/wiki/Economy_of_Switzerland</a>.
</p>
</div>

<p>As in the example shown in the data processing chapter (‘world population clock’), we first tell R to read the lines of text from the HTML document that constitutes the webpage.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="high-dimensional-data.html#cb158-1" aria-hidden="true" tabindex="-1"></a>swiss_econ <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">&quot;https://en.wikipedia.org/wiki/Economy_of_Switzerland&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in readLines(&quot;https://en.wikipedia.org/wiki/
## Economy_of_Switzerland&quot;): incomplete final line found on
## &#39;https://en.wikipedia.org/wiki/Economy_of_Switzerland&#39;</code></pre>
<p>And we can check if everything worked out well by having a look at the first lines of the web page’s HTML code:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="high-dimensional-data.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(swiss_econ)</span></code></pre></div>
<pre><code>## [1] &quot;&lt;!DOCTYPE html&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
## [2] &quot;&lt;html class=\&quot;client-nojs\&quot; lang=\&quot;en\&quot; dir=\&quot;ltr\&quot;&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
## [3] &quot;&lt;head&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
## [4] &quot;&lt;meta charset=\&quot;UTF-8\&quot;/&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
## [5] &quot;&lt;title&gt;Economy of Switzerland - Wikipedia&lt;/title&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
## [6] &quot;&lt;script&gt;document.documentElement.className=\&quot;client-js\&quot;;RLCONF={\&quot;wgBreakFrames\&quot;:false,\&quot;wgSeparatorTransformTable\&quot;:[\&quot;\&quot;,\&quot;\&quot;],\&quot;wgDigitTransformTable\&quot;:[\&quot;\&quot;,\&quot;\&quot;],\&quot;wgDefaultDateFormat\&quot;:\&quot;dmy\&quot;,\&quot;wgMonthNames\&quot;:[\&quot;\&quot;,\&quot;January\&quot;,\&quot;February\&quot;,\&quot;March\&quot;,\&quot;April\&quot;,\&quot;May\&quot;,\&quot;June\&quot;,\&quot;July\&quot;,\&quot;August\&quot;,\&quot;September\&quot;,\&quot;October\&quot;,\&quot;November\&quot;,\&quot;December\&quot;],\&quot;wgRequestId\&quot;:\&quot;36347212-ee7a-4a48-b422-b39e7b43a313\&quot;,\&quot;wgCSPNonce\&quot;:false,\&quot;wgCanonicalNamespace\&quot;:\&quot;\&quot;,\&quot;wgCanonicalSpecialPageName\&quot;:false,\&quot;wgNamespaceNumber\&quot;:0,\&quot;wgPageName\&quot;:\&quot;Economy_of_Switzerland\&quot;,\&quot;wgTitle\&quot;:\&quot;Economy of Switzerland\&quot;,\&quot;wgCurRevisionId\&quot;:1115528632,\&quot;wgRevisionId\&quot;:1115528632,\&quot;wgArticleId\&quot;:27465,\&quot;wgIsArticle\&quot;:true,\&quot;wgIsRedirect\&quot;:false,\&quot;wgAction\&quot;:\&quot;view\&quot;,\&quot;wgUserName\&quot;:null,\&quot;wgUserGroups\&quot;:[\&quot;*\&quot;],\&quot;wgCategories\&quot;:[\&quot;CS1 maint: archived copy as title\&quot;,\&quot;CS1 German-language sources (de)\&quot;,\&quot;Articles with German-language sources (de)\&quot;,\&quot;Webarchive template wayback links\&quot;,\&quot;Articles with French-language sources (fr)\&quot;,\&quot;Articles with short description\&quot;,\&quot;Short description is different from Wikidata\&quot;,&quot;</code></pre>
<p>The next thing we do is to look at how we can filter the webpage for certain information. For example, we search in the source code for the line that contains the part of the webpage with the table showing data on the Swiss GDP:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="high-dimensional-data.html#cb162-1" aria-hidden="true" tabindex="-1"></a>line_number <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&#39;US Dollar Exchange&#39;</span>, swiss_econ)</span></code></pre></div>
<p>Recall: we ask R on which line in <code>swiss_econ</code> (the source code stored in RAM) the text <code>US Dollar Exchange</code> is and store the answer (the line number) in RAM under the variable name <code>line_number</code>.</p>
<p>Then, we check on which line the text was found.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="high-dimensional-data.html#cb163-1" aria-hidden="true" tabindex="-1"></a>line_number</span></code></pre></div>
<pre><code>## [1] 231</code></pre>
<p>Knowing that the R object <code>swiss_econ</code> is a character vector (with each element containing one line of HTML code as a character string), we can look at this particular code:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="high-dimensional-data.html#cb165-1" aria-hidden="true" tabindex="-1"></a>swiss_econ[line_number]</span></code></pre></div>
<pre><code>## [1] &quot;&lt;th&gt;US Dollar Exchange&quot;</code></pre>
<p>Note that this rather primitive approach is ok to extract a chunk of code from an HTML document, but it is far from practical when we want to extract specific parts of data (the actual content, not including HTML code). So far, we have completely ignored that the HTML tags give some structure to the data in this document. That is, we simply have read the entire document line by line, not making a difference between code and data. The approach to filter the document could have equally well been taken for a plain text file.</p>
<p>If we want to exploit the structure given by HTML, we need to <em>parse</em> the HTML when reading the webpage into R. We can do this with the help of functions provided in the <code>rvest</code> package:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="high-dimensional-data.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install package if not yet installed</span></span>
<span id="cb167-2"><a href="high-dimensional-data.html#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;rvest&quot;)</span></span>
<span id="cb167-3"><a href="high-dimensional-data.html#cb167-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-4"><a href="high-dimensional-data.html#cb167-4" aria-hidden="true" tabindex="-1"></a><span class="co"># load the package</span></span>
<span id="cb167-5"><a href="high-dimensional-data.html#cb167-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<p>After loading the package, we read the webpage into R, but this time using a function that parses the HTML code:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="high-dimensional-data.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parse the webpage, show the content</span></span>
<span id="cb168-2"><a href="high-dimensional-data.html#cb168-2" aria-hidden="true" tabindex="-1"></a>swiss_econ_parsed <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;https://en.wikipedia.org/wiki/Economy_of_Switzerland&quot;</span>)</span>
<span id="cb168-3"><a href="high-dimensional-data.html#cb168-3" aria-hidden="true" tabindex="-1"></a>swiss_econ_parsed</span></code></pre></div>
<pre><code>## {html_document}
## &lt;html class=&quot;client-nojs&quot; lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html ...
## [2] &lt;body class=&quot;mediawiki ltr sitedir-ltr mw-hide-empty-elt n ...</code></pre>
<p>Now we can easily separate the data/text from the HTML code. For example, we can extract the HTML table containing the data we are interested in as <code>data frames</code>.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="high-dimensional-data.html#cb170-1" aria-hidden="true" tabindex="-1"></a>tab_node <span class="ot">&lt;-</span> <span class="fu">html_node</span>(swiss_econ_parsed, <span class="at">xpath =</span> <span class="st">&quot;//*[@id=&#39;mw-content-text&#39;]/div/table[2]&quot;</span>)</span>
<span id="cb170-2"><a href="high-dimensional-data.html#cb170-2" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">html_table</span>(tab_node)</span>
<span id="cb170-3"><a href="high-dimensional-data.html#cb170-3" aria-hidden="true" tabindex="-1"></a>tab</span></code></pre></div>
<pre><code>## # A tibble: 19 × 3
##     Year `GDP (billions of CHF)` `US Dollar Exchange`
##    &lt;int&gt;                   &lt;int&gt; &lt;chr&gt;               
##  1  1980                     184 1.67 Francs         
##  2  1985                     244 2.43 Francs         
##  3  1990                     331 1.38 Francs         
##  4  1995                     374 1.18 Francs         
##  5  2000                     422 1.68 Francs         
##  6  2005                     464 1.24 Francs         
##  7  2006                     491 1.25 Francs         
##  8  2007                     521 1.20 Francs         
##  9  2008                     547 1.08 Francs         
## 10  2009                     535 1.09 Francs         
## 11  2010                     546 1.04 Francs         
## 12  2011                     659 0.89 Francs         
## 13  2012                     632 0.94 Francs         
## 14  2013                     635 0.93 Francs         
## 15  2014                     644 0.92 Francs         
## 16  2015                     646 0.96 Francs         
## 17  2016                     659 0.98 Francs         
## 18  2017                     668 1.01 Francs         
## 19  2018                     694 1.00 Francs</code></pre>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="13">
<li id="fn13"><p>Not that programs running on the server side are frequently capable of returning the same data in either format<a href="high-dimensional-data.html#fnref13" class="footnote-back">↩︎</a></p></li>
<li id="fn14"><p>The systematic collection and extraction of data from such web sources (often referred to as Web Data Mining) goes well beyond the scope of this book.<a href="high-dimensional-data.html#fnref14" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-storage-and-data-structures.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="text-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["datahandling.pdf", "datahandling.html", "datahandling.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
