<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 High-Dimensional Data | Data Handling</title>
  <meta name="description" content="A guide to practical data handling with a focus on R and empirical economic research." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 High-Dimensional Data | Data Handling" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://umatter.github.io/datahandling/" />
  <meta property="og:image" content="https://umatter.github.io/datahandling/img/new_abacus.jpg" />
  <meta property="og:description" content="A guide to practical data handling with a focus on R and empirical economic research." />
  <meta name="github-repo" content="umatter/datahandling" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 High-Dimensional Data | Data Handling" />
  
  <meta name="twitter:description" content="A guide to practical data handling with a focus on R and empirical economic research." />
  <meta name="twitter:image" content="https://umatter.github.io/datahandling/img/new_abacus.jpg" />

<meta name="author" content="Ulrich Matter" />


<meta name="date" content="2022-01-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-storage-and-data-structures.html"/>
<link rel="next" href="data-sources-data-gathering-data-import.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Handling</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="programming-with-data.html"><a href="programming-with-data.html"><i class="fa fa-check"></i><b>2</b> Programming with Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="programming-with-data.html"><a href="programming-with-data.html#first-steps-with-r"><i class="fa fa-check"></i><b>2.1</b> First steps with R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="programming-with-data.html"><a href="programming-with-data.html#variables-and-vectors"><i class="fa fa-check"></i><b>2.1.1</b> Variables and vectors</a></li>
<li class="chapter" data-level="2.1.2" data-path="programming-with-data.html"><a href="programming-with-data.html#math-operators"><i class="fa fa-check"></i><b>2.1.2</b> Math operators</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="programming-with-data.html"><a href="programming-with-data.html#basic-programming-concepts-in-r"><i class="fa fa-check"></i><b>2.2</b> Basic programming concepts in R</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="programming-with-data.html"><a href="programming-with-data.html#loops"><i class="fa fa-check"></i><b>2.2.1</b> Loops</a></li>
<li class="chapter" data-level="2.2.2" data-path="programming-with-data.html"><a href="programming-with-data.html#for-loops"><i class="fa fa-check"></i><b>2.2.2</b> For-loops</a></li>
<li class="chapter" data-level="2.2.3" data-path="programming-with-data.html"><a href="programming-with-data.html#booleans-and-logical-statements"><i class="fa fa-check"></i><b>2.2.3</b> Booleans and logical statements</a></li>
<li class="chapter" data-level="2.2.4" data-path="programming-with-data.html"><a href="programming-with-data.html#r-functions"><i class="fa fa-check"></i><b>2.2.4</b> R functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#processing-data-simple-calculations-in-numeral-systems"><i class="fa fa-check"></i><b>3.1</b> Processing data: simple calculations in numeral systems</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#the-binary-system"><i class="fa fa-check"></i><b>3.1.1</b> The binary system</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#the-hexadecimal-system"><i class="fa fa-check"></i><b>3.1.2</b> The hexadecimal system</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#character-encoding"><i class="fa fa-check"></i><b>3.2</b> Character encoding</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#computer-code-and-text-files"><i class="fa fa-check"></i><b>3.3</b> Computer code and text files</a></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#data-processing-basics"><i class="fa fa-check"></i><b>3.4</b> Data processing basics</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data.html"><a href="data.html#components-of-a-standard-computing-environment"><i class="fa fa-check"></i><b>3.4.1</b> Components of a standard computing environment</a></li>
<li class="chapter" data-level="3.4.2" data-path="data.html"><a href="data.html#illustration"><i class="fa fa-check"></i><b>3.4.2</b> Illustration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html"><i class="fa fa-check"></i><b>4</b> Data Storage and Data Structures</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#unstructured-data-in-text-files"><i class="fa fa-check"></i><b>4.1</b> Unstructured data in text files</a></li>
<li class="chapter" data-level="4.2" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#structured-data-formats"><i class="fa fa-check"></i><b>4.2</b> Structured data formats</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#csvs-and-fixed-width-format"><i class="fa fa-check"></i><b>4.2.1</b> CSVs and fixed-width format</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#units-of-informationdata-storage"><i class="fa fa-check"></i><b>4.3</b> Units of information/data storage</a></li>
<li class="chapter" data-level="4.4" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#data-structures-and-data-types-in-r"><i class="fa fa-check"></i><b>4.4</b> Data structures and data types in R</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#data-types"><i class="fa fa-check"></i><b>4.4.1</b> Data types</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-storage-and-data-structures.html"><a href="data-storage-and-data-structures.html#data-structures"><i class="fa fa-check"></i><b>4.4.2</b> Data structures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html"><i class="fa fa-check"></i><b>5</b> High-Dimensional Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#deciphering-xml"><i class="fa fa-check"></i><b>5.1</b> Deciphering XML</a></li>
<li class="chapter" data-level="5.2" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#deciphering-json"><i class="fa fa-check"></i><b>5.2</b> Deciphering JSON</a></li>
<li class="chapter" data-level="5.3" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#parsing-xml-and-json-in-r"><i class="fa fa-check"></i><b>5.3</b> Parsing XML and JSON in R</a></li>
<li class="chapter" data-level="5.4" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#html"><i class="fa fa-check"></i><b>5.4</b> HTML</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#write-a-simple-webpage-with-html"><i class="fa fa-check"></i><b>5.4.1</b> Write a simple webpage with HTML</a></li>
<li class="chapter" data-level="5.4.2" data-path="high-dimensional-data.html"><a href="high-dimensional-data.html#two-ways-to-read-a-webpage-into-r"><i class="fa fa-check"></i><b>5.4.2</b> Two ways to read a webpage into R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html"><i class="fa fa-check"></i><b>6</b> Data Sources, Data Gathering, Data Import</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#sourcesformats"><i class="fa fa-check"></i><b>6.1</b> Sources/formats</a></li>
<li class="chapter" data-level="6.2" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#data-gathering-procedure"><i class="fa fa-check"></i><b>6.2</b> Data gathering procedure</a></li>
<li class="chapter" data-level="6.3" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#loadingimporting-rectangular-data"><i class="fa fa-check"></i><b>6.3</b> Loading/importing rectangular data</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#loading-built-in-datasets"><i class="fa fa-check"></i><b>6.3.1</b> Loading built-in datasets</a></li>
<li class="chapter" data-level="6.3.2" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#importing-rectangular-data-from-text-files"><i class="fa fa-check"></i><b>6.3.2</b> Importing rectangular data from text-files</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#import-and-parsing-with-readr"><i class="fa fa-check"></i><b>6.4</b> Import and parsing with <code>readr</code></a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#basic-usage-of-readr-functions"><i class="fa fa-check"></i><b>6.4.1</b> Basic usage of <code>readr</code> functions</a></li>
<li class="chapter" data-level="6.4.2" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#parsing-and-data-types"><i class="fa fa-check"></i><b>6.4.2</b> Parsing and data types</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#importing-web-data-formats"><i class="fa fa-check"></i><b>6.5</b> Importing web data formats</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#xml-in-r"><i class="fa fa-check"></i><b>6.5.1</b> XML in R</a></li>
<li class="chapter" data-level="6.5.2" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#json-in-r"><i class="fa fa-check"></i><b>6.5.2</b> JSON in R</a></li>
<li class="chapter" data-level="6.5.3" data-path="data-sources-data-gathering-data-import.html"><a href="data-sources-data-gathering-data-import.html#tutorial-advanced-importing-data-from-a-html-table-on-a-website"><i class="fa fa-check"></i><b>6.5.3</b> Tutorial (advanced): Importing data from a HTML table (on a website)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-preparation.html"><a href="data-preparation.html"><i class="fa fa-check"></i><b>7</b> Data Preparation</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-preparation.html"><a href="data-preparation.html#cleaning-data-with-basic-string-operations"><i class="fa fa-check"></i><b>7.1</b> Cleaning data with basic string operations</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="data-preparation.html"><a href="data-preparation.html#findreplace-character-strings-recode-factor-levels"><i class="fa fa-check"></i><b>7.1.1</b> Find/replace character strings, recode factor levels</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-preparation.html"><a href="data-preparation.html#removing-individual-characters-from-a-string"><i class="fa fa-check"></i><b>7.1.2</b> Removing individual characters from a string</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-preparation.html"><a href="data-preparation.html#splitting-strings"><i class="fa fa-check"></i><b>7.1.3</b> Splitting strings</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-preparation.html"><a href="data-preparation.html#parsing-dates"><i class="fa fa-check"></i><b>7.1.4</b> Parsing dates</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-preparation.html"><a href="data-preparation.html#reshaping-datasets"><i class="fa fa-check"></i><b>7.2</b> Reshaping datasets</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="data-preparation.html"><a href="data-preparation.html#tidying-messy-datasets."><i class="fa fa-check"></i><b>7.2.1</b> Tidying messy datasets.</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-preparation.html"><a href="data-preparation.html#pivoting-from-wide-to-long-gathering"><i class="fa fa-check"></i><b>7.2.2</b> Pivoting from ‘wide to long’ (“gathering”)</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-preparation.html"><a href="data-preparation.html#pivoting-from-long-to-wide-spreading"><i class="fa fa-check"></i><b>7.2.3</b> Pivoting from ‘long to wide’ (“spreading”)</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-preparation.html"><a href="data-preparation.html#tutorial-hotel-bookings-time-series"><i class="fa fa-check"></i><b>7.3</b> Tutorial: Hotel Bookings Time Series</a></li>
<li class="chapter" data-level="7.4" data-path="data-preparation.html"><a href="data-preparation.html#set-up-and-import"><i class="fa fa-check"></i><b>7.4</b> Set up and import</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html"><i class="fa fa-check"></i><b>8</b> Data Analysis: First Steps</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#merging-datasets"><i class="fa fa-check"></i><b>8.1</b> Merging datasets</a></li>
<li class="chapter" data-level="8.2" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#selecting-subsets"><i class="fa fa-check"></i><b>8.2</b> Selecting subsets</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#filtering-datasets"><i class="fa fa-check"></i><b>8.2.1</b> Filtering datasets</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#mutating-datasets"><i class="fa fa-check"></i><b>8.2.2</b> Mutating datasets</a></li>
<li class="chapter" data-level="8.2.3" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#aggregation-and-summary-statistics"><i class="fa fa-check"></i><b>8.2.3</b> Aggregation and summary statistics</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#tutorial-analise-messy-excel-sheets"><i class="fa fa-check"></i><b>8.3</b> Tutorial: Analise messy Excel sheets</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-analysis-first-steps.html"><a href="data-analysis-first-steps.html#preparatory-steps"><i class="fa fa-check"></i><b>8.3.1</b> Preparatory steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html"><i class="fa fa-check"></i><b>9</b> Basic Econometrics in R</a>
<ul>
<li class="chapter" data-level="9.1" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#statistical-modelling"><i class="fa fa-check"></i><b>9.1</b> Statistical modelling</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#illustration-with-pseudo-data"><i class="fa fa-check"></i><b>9.1.1</b> Illustration with pseudo-data</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#estimation-and-application"><i class="fa fa-check"></i><b>9.2</b> Estimation and Application</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#model-specification"><i class="fa fa-check"></i><b>9.2.1</b> Model specification</a></li>
<li class="chapter" data-level="9.2.2" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#raw-data"><i class="fa fa-check"></i><b>9.2.2</b> Raw data</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#derivation-and-implementation-of-ols-estimator"><i class="fa fa-check"></i><b>9.3</b> Derivation and implementation of OLS estimator</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="basic-econometrics-in-r.html"><a href="basic-econometrics-in-r.html#regression-toolbox-in-r"><i class="fa fa-check"></i><b>9.3.1</b> Regression toolbox in R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>10</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-visualization.html"><a href="data-visualization.html#data-display"><i class="fa fa-check"></i><b>10.1</b> Data display</a></li>
<li class="chapter" data-level="10.2" data-path="data-visualization.html"><a href="data-visualization.html#data-visualisation-with-ggplot2"><i class="fa fa-check"></i><b>10.2</b> Data visualisation with <code>ggplot2</code></a></li>
<li class="chapter" data-level="10.3" data-path="data-visualization.html"><a href="data-visualization.html#grammar-of-graphics"><i class="fa fa-check"></i><b>10.3</b> ‘Grammar of Graphics’</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2-basics"><i class="fa fa-check"></i><b>10.3.1</b> <code>ggplot2</code> basics</a></li>
<li class="chapter" data-level="10.3.2" data-path="data-visualization.html"><a href="data-visualization.html#tutorial"><i class="fa fa-check"></i><b>10.3.2</b> Tutorial</a></li>
<li class="chapter" data-level="10.3.3" data-path="data-visualization.html"><a href="data-visualization.html#loadingpreparing-the-data"><i class="fa fa-check"></i><b>10.3.3</b> Loading/preparing the data</a></li>
<li class="chapter" data-level="10.3.4" data-path="data-visualization.html"><a href="data-visualization.html#geometries-type-of-plot"><i class="fa fa-check"></i><b>10.3.4</b> Geometries (~ type of plot)</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="data-visualization.html"><a href="data-visualization.html#dynamic-documents"><i class="fa fa-check"></i><b>10.4</b> Dynamic documents</a></li>
<li class="chapter" data-level="10.5" data-path="data-visualization.html"><a href="data-visualization.html#tutorial-how-to-give-the-wrong-impression-with-data-visualisation"><i class="fa fa-check"></i><b>10.5</b> Tutorial: How to give the wrong impression with data visualisation</a></li>
<li class="chapter" data-level="10.6" data-path="data-visualization.html"><a href="data-visualization.html#background-and-aim"><i class="fa fa-check"></i><b>10.6</b> Background and aim</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="data-visualization.html"><a href="data-visualization.html#data-import-and-preparation"><i class="fa fa-check"></i><b>10.6.1</b> Data import and preparation</a></li>
<li class="chapter" data-level="10.6.2" data-path="data-visualization.html"><a href="data-visualization.html#plot"><i class="fa fa-check"></i><b>10.6.2</b> Plot</a></li>
<li class="chapter" data-level="10.6.3" data-path="data-visualization.html"><a href="data-visualization.html#cosmetics-theme"><i class="fa fa-check"></i><b>10.6.3</b> Cosmetics: theme</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="appendix-a.html"><a href="appendix-a.html"><i class="fa fa-check"></i><b>A</b> Appendix A</a>
<ul>
<li class="chapter" data-level="A.1" data-path="appendix-a.html"><a href="appendix-a.html#understanding-statistics-and-probability-with-code"><i class="fa fa-check"></i><b>A.1</b> Understanding statistics and probability with code</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="appendix-a.html"><a href="appendix-a.html#random-draws-and-distributions"><i class="fa fa-check"></i><b>A.1.1</b> Random draws and distributions</a></li>
<li class="chapter" data-level="A.1.2" data-path="appendix-a.html"><a href="appendix-a.html#illustration-of-variability"><i class="fa fa-check"></i><b>A.1.2</b> Illustration of variability</a></li>
<li class="chapter" data-level="A.1.3" data-path="appendix-a.html"><a href="appendix-a.html#skewness-and-kurtosis"><i class="fa fa-check"></i><b>A.1.3</b> Skewness and Kurtosis</a></li>
<li class="chapter" data-level="A.1.4" data-path="appendix-a.html"><a href="appendix-a.html#the-law-of-large-numbers"><i class="fa fa-check"></i><b>A.1.4</b> The Law of Large Numbers</a></li>
<li class="chapter" data-level="A.1.5" data-path="appendix-a.html"><a href="appendix-a.html#the-central-limit-theorem"><i class="fa fa-check"></i><b>A.1.5</b> The Central Limit Theorem</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b.html"><a href="appendix-b.html"><i class="fa fa-check"></i><b>B</b> Appendix B</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://umatter.github.io" target="blank">umatter.github.io</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Handling</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="high-dimensional-data" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> High-Dimensional Data</h1>
<p>So far, we have only looked at data structured in a flat/table-like representation (e.g., CSV files). In applied econometrics/statistics it is common to only work with data sets stored in such formats. The main reason is that data manipulation, filtering, aggregation, etc. presuppose/expect data in a table-like format (i.e. matrices). Hence, it makes perfectly sense to already store the data in this format.</p>
<p>As we have observed in the previous lecture, when representing more complex data in a text file, the CSV structure has some disadvantages. This is in particular true if the data contains nested observations (i.e., hierarchical structures). While a representation in a CSV file is theoretically possible, it is often far from practical to use other formats for such data. On the one hand, it is likely less intuitive to read the data correctly. On the other hand, storing the data in a CSV file might introduce a lot of redundancy. That is, the identical values of some variables would have to be repeated again and again in the same column. The following code block illustrates this point for a data set on two families (<span class="citation">(<a href="references.html#ref-murrell_2009" role="doc-biblioref">Murrell 2009</a>)</span>, p. 116).</p>
<pre><code>father mother  name     age  gender
               John      33  male
               Julia     32  female
John   Julia   Jack       6  male
John   Julia   Jill       4  female
John   Julia   John jnr   2  male
               David     45  male
               Debbie    42  female
David  Debbie  Donald    16  male
David  Debbie  Dianne    12  female
</code></pre>
<p>From simply looking at the data we can make a best guess which observations belong together (are one family). However, the implied hierarchy is not apparent at first sight. While it might not matter too much that several values have to be repeated several times in this format, given that this data set is so small, the repeated values can become a problem when the data set is much larger. For each time <code>John</code> is repeated in the <code>father</code>-column, we use up 4 bytes of memory. If there are millions of people in this data set and/or if we have to transfer this data set very often over a computer network, these repetitions can become quite costly (as we would need more storage capacity and network resources).</p>
<p>Issues with complex/hierarchical data (with several observation types), intuitive human readability (self-describing), and efficiency in storage as well as transfer are all of great importance in the Web. In course of the development of the Internet several data formats have been put forward to address these issues. Here, we discuss the two most prominent of these formats: <a href="https://en.wikipedia.org/wiki/XML">Extensible Markup Language (XML)</a> and <a href="https://en.wikipedia.org/wiki/JSON">JavaScript Object Notation (JSON)</a>.</p>
<div id="deciphering-xml" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Deciphering XML</h2>
<p>Before going into more technical details, let’s try to figure out the basic logic behind the XML format by simply looking at some raw example data. For this, we turn to the Point Nemo case study in <span class="citation">(<a href="references.html#ref-murrell_2009" role="doc-biblioref">Murrell 2009</a>)</span>. The following code block shows the upper part of the data set downloaded from NASA’s LAS server (here in a CSV-type format).</p>
<pre><code>             VARIABLE : Monthly Surface Clear-sky Temperature (ISCCP) (Celsius)
             FILENAME : ISCCPMonthly_avg.nc
             FILEPATH : /usr/local/fer_data/data/
             BAD FLAG : -1.E+34       
             SUBSET   : 48 points (TIME)
             LONGITUDE: 123.8W(-123.8)
             LATITUDE : 48.8S
            123.8W 
16-JAN-1994 00  9.200012
16-FEB-1994 00  10.70001
16-MAR-1994 00  7.5
16-APR-1994 00  8.100006</code></pre>
<p>Below, the same data is now displayed in XML-format. Note that in both cases, the data is simply stored in a text file. However, it is stored in a format that imposes a different <em>structure</em> on the data.</p>
<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;temperatures&gt;
&lt;variable&gt;Monthly Surface Clear-sky Temperature (ISCCP) (Celsius)&lt;/variable&gt;
&lt;filename&gt;ISCCPMonthly_avg.nc&lt;/filename&gt;
&lt;filepath&gt;/usr/local/fer_data/data/&lt;/filepath&gt;
&lt;badflag&gt;-1.E+34&lt;/badflag&gt;

&lt;subset&gt;48 points (TIME)&lt;/subset&gt;
&lt;longitude&gt;123.8W(-123.8)&lt;/longitude&gt;
&lt;latitude&gt;48.8S&lt;/latitude&gt;
&lt;case date=&quot;16-JAN-1994&quot; temperature=&quot;9.200012&quot; /&gt;
&lt;case date=&quot;16-FEB-1994&quot; temperature=&quot;10.70001&quot; /&gt;
&lt;case date=&quot;16-MAR-1994&quot; temperature=&quot;7.5&quot; /&gt;
&lt;case date=&quot;16-APR-1994&quot; temperature=&quot;8.100006&quot; /&gt;

...
&lt;/temperatures&gt;</code></pre>
<p>What features does the format have? What is its logic? Is there room for improvement? By using indentation and code highlighting, the XML data structure becomes more apparent.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb131-1"><a href="high-dimensional-data.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;?xml</span> version=&quot;1.0&quot;<span class="kw">?&gt;</span></span>
<span id="cb131-2"><a href="high-dimensional-data.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;temperatures&gt;</span></span>
<span id="cb131-3"><a href="high-dimensional-data.html#cb131-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;variable&gt;</span>Monthly Surface Clear-sky Temperature (ISCCP) (Celsius)<span class="kw">&lt;/variable&gt;</span></span>
<span id="cb131-4"><a href="high-dimensional-data.html#cb131-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;filename&gt;</span>ISCCPMonthly_avg.nc<span class="kw">&lt;/filename&gt;</span></span>
<span id="cb131-5"><a href="high-dimensional-data.html#cb131-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;filepath&gt;</span>/usr/local/fer_data/data/<span class="kw">&lt;/filepath&gt;</span></span>
<span id="cb131-6"><a href="high-dimensional-data.html#cb131-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;badflag&gt;</span>-1.E+34<span class="kw">&lt;/badflag&gt;</span></span>
<span id="cb131-7"><a href="high-dimensional-data.html#cb131-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;subset&gt;</span>48 points (TIME)<span class="kw">&lt;/subset&gt;</span></span>
<span id="cb131-8"><a href="high-dimensional-data.html#cb131-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;longitude&gt;</span>123.8W(-123.8)<span class="kw">&lt;/longitude&gt;</span></span>
<span id="cb131-9"><a href="high-dimensional-data.html#cb131-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;latitude&gt;</span>48.8S<span class="kw">&lt;/latitude&gt;</span></span>
<span id="cb131-10"><a href="high-dimensional-data.html#cb131-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-JAN-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;9.200012&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb131-11"><a href="high-dimensional-data.html#cb131-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-FEB-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;10.70001&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb131-12"><a href="high-dimensional-data.html#cb131-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-MAR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;7.5&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb131-13"><a href="high-dimensional-data.html#cb131-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-APR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;8.100006&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb131-14"><a href="high-dimensional-data.html#cb131-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-15"><a href="high-dimensional-data.html#cb131-15" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb131-16"><a href="high-dimensional-data.html#cb131-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/temperatures&gt;</span></span></code></pre></div>
<p>First, note how special characters are used to define the structure of the document. We notice that <code>&lt;</code> and <code>&gt;</code>, containing some text label seem to play a key role in defining the structure. These building blocks are called ‘XML-tags.’ We are free to choose what tags we want to use. In essence, we can define them ourselves in order to most properly describe the data. Moreover, the example data reveals the flexibility of XML to depict hierarchical structures.</p>
<p>The actual content we know from the csv-type example above is nested between the ‘<code>temperatures</code>’-tags, indicating what the data is about.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb132-1"><a href="high-dimensional-data.html#cb132-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;temperatures&gt;</span></span>
<span id="cb132-2"><a href="high-dimensional-data.html#cb132-2" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb132-3"><a href="high-dimensional-data.html#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/temperatures&gt;</span></span></code></pre></div>
<p>Comparing the actual content between these tags with the csv-type format above, we further recognize that there are two principal ways to link variable names to values.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb133-1"><a href="high-dimensional-data.html#cb133-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;variable&gt;</span>Monthly Surface Clear-sky Temperature (ISCCP) (Celsius)<span class="kw">&lt;/variable&gt;</span></span>
<span id="cb133-2"><a href="high-dimensional-data.html#cb133-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;filename&gt;</span>ISCCPMonthly_avg.nc<span class="kw">&lt;/filename&gt;</span></span>
<span id="cb133-3"><a href="high-dimensional-data.html#cb133-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;filepath&gt;</span>/usr/local/fer_data/data/<span class="kw">&lt;/filepath&gt;</span></span>
<span id="cb133-4"><a href="high-dimensional-data.html#cb133-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;badflag&gt;</span>-1.E+34<span class="kw">&lt;/badflag&gt;</span></span>
<span id="cb133-5"><a href="high-dimensional-data.html#cb133-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;subset&gt;</span>48 points (TIME)<span class="kw">&lt;/subset&gt;</span></span>
<span id="cb133-6"><a href="high-dimensional-data.html#cb133-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;longitude&gt;</span>123.8W(-123.8)<span class="kw">&lt;/longitude&gt;</span></span>
<span id="cb133-7"><a href="high-dimensional-data.html#cb133-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;latitude&gt;</span>48.8S<span class="kw">&lt;/latitude&gt;</span></span>
<span id="cb133-8"><a href="high-dimensional-data.html#cb133-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-JAN-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;9.200012&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb133-9"><a href="high-dimensional-data.html#cb133-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-FEB-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;10.70001&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb133-10"><a href="high-dimensional-data.html#cb133-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-MAR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;7.5&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb133-11"><a href="high-dimensional-data.html#cb133-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-APR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;8.100006&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<p>One way is to define opening and closing xml-tags with the variable name and surround the value with them, such as in <code>&lt;filename&gt;ISCCPMonthly_avg.nc&lt;/filename&gt;</code>. Another way would be to encapsule the values within one tag by defining tag-attributes such as in <code>&lt;case date="16-JAN-1994" temperature="9.200012" /&gt;</code>. In many situations, both approaches can make sense. For example, the way the temperature measurements are encoded in the example data set is based on the tag-attributes approach:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb134-1"><a href="high-dimensional-data.html#cb134-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-JAN-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;9.200012&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb134-2"><a href="high-dimensional-data.html#cb134-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-FEB-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;10.70001&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb134-3"><a href="high-dimensional-data.html#cb134-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-MAR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;7.5&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb134-4"><a href="high-dimensional-data.html#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case</span><span class="ot"> date=</span><span class="st">&quot;16-APR-1994&quot;</span><span class="ot"> temperature=</span><span class="st">&quot;8.100006&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<p>We could rewrite this by only using XML tags and no attributes:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb135-1"><a href="high-dimensional-data.html#cb135-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;cases&gt;</span>    </span>
<span id="cb135-2"><a href="high-dimensional-data.html#cb135-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case&gt;</span></span>
<span id="cb135-3"><a href="high-dimensional-data.html#cb135-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;date&gt;</span>16-JAN-1994<span class="kw">&lt;date/&gt;</span></span>
<span id="cb135-4"><a href="high-dimensional-data.html#cb135-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;temperature&gt;</span>9.200012<span class="kw">&lt;temperature/&gt;</span></span>
<span id="cb135-5"><a href="high-dimensional-data.html#cb135-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case/&gt;</span></span>
<span id="cb135-6"><a href="high-dimensional-data.html#cb135-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case&gt;</span></span>
<span id="cb135-7"><a href="high-dimensional-data.html#cb135-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;date&gt;</span>16-FEB-1994<span class="kw">&lt;date/&gt;</span></span>
<span id="cb135-8"><a href="high-dimensional-data.html#cb135-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;temperature&gt;</span>10.70001<span class="kw">&lt;temperature/&gt;</span></span>
<span id="cb135-9"><a href="high-dimensional-data.html#cb135-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case/&gt;</span></span>
<span id="cb135-10"><a href="high-dimensional-data.html#cb135-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case&gt;</span></span>
<span id="cb135-11"><a href="high-dimensional-data.html#cb135-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;date&gt;</span>16-MAR-1994<span class="kw">&lt;date/&gt;</span></span>
<span id="cb135-12"><a href="high-dimensional-data.html#cb135-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;temperature&gt;</span>7.5<span class="kw">&lt;temperature/&gt;</span></span>
<span id="cb135-13"><a href="high-dimensional-data.html#cb135-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case/&gt;</span></span>
<span id="cb135-14"><a href="high-dimensional-data.html#cb135-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case&gt;</span></span>
<span id="cb135-15"><a href="high-dimensional-data.html#cb135-15" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;date&gt;</span>16-APR-1994<span class="kw">&lt;date/&gt;</span></span>
<span id="cb135-16"><a href="high-dimensional-data.html#cb135-16" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;temperature&gt;</span>8.100006<span class="kw">&lt;temperature/&gt;</span></span>
<span id="cb135-17"><a href="high-dimensional-data.html#cb135-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;case/&gt;</span></span>
<span id="cb135-18"><a href="high-dimensional-data.html#cb135-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;cases/&gt;</span></span></code></pre></div>
<p>As long as we follow the basic XML syntax both versions are valid and XML parsers can read them equally well.</p>
<p>Note the key differences of storing data in XML format in contrast to a flat, table-like format such as CSV:</p>
<ul>
<li>Storing both the actual data and metadata in the same file is straightforward (as the above example illustrates). Storing metadata in the first lines of a CSV-file (such as in the example above) is theoretically possible. However, by doing so we break the csv syntax and a csv-parser would likely break down when reading such a file (recall the simple csv parsing algorithm). More generally, we can represent much more <em>complex (multi-dimensional)</em> data in XML-files than what is possible in CSVs. In fact, the nesting structure can be arbitrarily complex, as long as the XML syntax is valid.</li>
<li>The XML syntax is largely self-explanatory and thus both <em>machine-readable and human-readable</em>. That is, not only can parsers/computers more easily handle complex data structures, human readers can intuitively understand what the data is all about just by looking at the raw XML file.</li>
</ul>
<p>A potential drawback of storing data in XML format is that variable names (in tags) are repeated again and again. Since each tag consists of a couple of bytes, this can be highly inefficient when compared to a table-like format where variable names are only defined once. Typically, this means that if the data at hand is only two-dimensional (observations/variables), a CSV format makes more sense.</p>
</div>
<div id="deciphering-json" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Deciphering JSON</h2>
<p>In many web applications, JSON serves the same purpose as XML<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a>. An obvious difference between the two conventions is that JSON does not use tags but attribute-value pairs to annotate data. The following code example shows how the same data can be represented in XML or in JSON (example code taken from <a href="https://en.wikipedia.org/wiki/JSON" class="uri">https://en.wikipedia.org/wiki/JSON</a>):</p>
<p><em>XML:</em></p>
<div class="sourceCode" id="cb136"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb136-1"><a href="high-dimensional-data.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;person&gt;</span></span>
<span id="cb136-2"><a href="high-dimensional-data.html#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;firstName&gt;</span>John<span class="kw">&lt;/firstName&gt;</span></span>
<span id="cb136-3"><a href="high-dimensional-data.html#cb136-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;lastName&gt;</span>Smith<span class="kw">&lt;/lastName&gt;</span></span>
<span id="cb136-4"><a href="high-dimensional-data.html#cb136-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;age&gt;</span>25<span class="kw">&lt;/age&gt;</span></span>
<span id="cb136-5"><a href="high-dimensional-data.html#cb136-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;address&gt;</span></span>
<span id="cb136-6"><a href="high-dimensional-data.html#cb136-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;streetAddress&gt;</span>21 2nd Street<span class="kw">&lt;/streetAddress&gt;</span></span>
<span id="cb136-7"><a href="high-dimensional-data.html#cb136-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;city&gt;</span>New York<span class="kw">&lt;/city&gt;</span></span>
<span id="cb136-8"><a href="high-dimensional-data.html#cb136-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;state&gt;</span>NY<span class="kw">&lt;/state&gt;</span></span>
<span id="cb136-9"><a href="high-dimensional-data.html#cb136-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;postalCode&gt;</span>10021<span class="kw">&lt;/postalCode&gt;</span></span>
<span id="cb136-10"><a href="high-dimensional-data.html#cb136-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/address&gt;</span></span>
<span id="cb136-11"><a href="high-dimensional-data.html#cb136-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;phoneNumber&gt;</span></span>
<span id="cb136-12"><a href="high-dimensional-data.html#cb136-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;type&gt;</span>home<span class="kw">&lt;/type&gt;</span></span>
<span id="cb136-13"><a href="high-dimensional-data.html#cb136-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;number&gt;</span>212 555-1234<span class="kw">&lt;/number&gt;</span></span>
<span id="cb136-14"><a href="high-dimensional-data.html#cb136-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/phoneNumber&gt;</span></span>
<span id="cb136-15"><a href="high-dimensional-data.html#cb136-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;phoneNumber&gt;</span></span>
<span id="cb136-16"><a href="high-dimensional-data.html#cb136-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;type&gt;</span>fax<span class="kw">&lt;/type&gt;</span></span>
<span id="cb136-17"><a href="high-dimensional-data.html#cb136-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;number&gt;</span>646 555-4567<span class="kw">&lt;/number&gt;</span></span>
<span id="cb136-18"><a href="high-dimensional-data.html#cb136-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/phoneNumber&gt;</span></span>
<span id="cb136-19"><a href="high-dimensional-data.html#cb136-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;gender&gt;</span></span>
<span id="cb136-20"><a href="high-dimensional-data.html#cb136-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;type&gt;</span>male<span class="kw">&lt;/type&gt;</span></span>
<span id="cb136-21"><a href="high-dimensional-data.html#cb136-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/gender&gt;</span></span>
<span id="cb136-22"><a href="high-dimensional-data.html#cb136-22" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/person&gt;</span></span></code></pre></div>
<p><em>JSON:</em></p>
<div class="sourceCode" id="cb137"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb137-1"><a href="high-dimensional-data.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;firstName&quot;</span><span class="fu">:</span> <span class="st">&quot;John&quot;</span><span class="fu">,</span></span>
<span id="cb137-2"><a href="high-dimensional-data.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;lastName&quot;</span><span class="fu">:</span> <span class="st">&quot;Smith&quot;</span><span class="fu">,</span></span>
<span id="cb137-3"><a href="high-dimensional-data.html#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;age&quot;</span><span class="fu">:</span> <span class="dv">25</span><span class="fu">,</span></span>
<span id="cb137-4"><a href="high-dimensional-data.html#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;address&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb137-5"><a href="high-dimensional-data.html#cb137-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;streetAddress&quot;</span><span class="fu">:</span> <span class="st">&quot;21 2nd Street&quot;</span><span class="fu">,</span></span>
<span id="cb137-6"><a href="high-dimensional-data.html#cb137-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;city&quot;</span><span class="fu">:</span> <span class="st">&quot;New York&quot;</span><span class="fu">,</span></span>
<span id="cb137-7"><a href="high-dimensional-data.html#cb137-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;state&quot;</span><span class="fu">:</span> <span class="st">&quot;NY&quot;</span><span class="fu">,</span></span>
<span id="cb137-8"><a href="high-dimensional-data.html#cb137-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;postalCode&quot;</span><span class="fu">:</span> <span class="st">&quot;10021&quot;</span></span>
<span id="cb137-9"><a href="high-dimensional-data.html#cb137-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb137-10"><a href="high-dimensional-data.html#cb137-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;phoneNumber&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb137-11"><a href="high-dimensional-data.html#cb137-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb137-12"><a href="high-dimensional-data.html#cb137-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;home&quot;</span><span class="fu">,</span></span>
<span id="cb137-13"><a href="high-dimensional-data.html#cb137-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;number&quot;</span><span class="fu">:</span> <span class="st">&quot;212 555-1234&quot;</span></span>
<span id="cb137-14"><a href="high-dimensional-data.html#cb137-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb137-15"><a href="high-dimensional-data.html#cb137-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb137-16"><a href="high-dimensional-data.html#cb137-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;fax&quot;</span><span class="fu">,</span></span>
<span id="cb137-17"><a href="high-dimensional-data.html#cb137-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;number&quot;</span><span class="fu">:</span> <span class="st">&quot;646 555-4567&quot;</span></span>
<span id="cb137-18"><a href="high-dimensional-data.html#cb137-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb137-19"><a href="high-dimensional-data.html#cb137-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb137-20"><a href="high-dimensional-data.html#cb137-20" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;gender&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb137-21"><a href="high-dimensional-data.html#cb137-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;male&quot;</span></span>
<span id="cb137-22"><a href="high-dimensional-data.html#cb137-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb137-23"><a href="high-dimensional-data.html#cb137-23" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Note that despite the differences of the syntax, the similarities regarding the nesting structure are visible in both formats. For example, <code>postalCode</code> is embedded in <code>address</code>, <code>firstname</code> and <code>lastname</code> are at the same nesting level, etc.</p>
<p>Both XML and JSON are predominantly used to store rather complex, multi-dimensional data. Because they are both human- and machine-readable, these formats are often used to transfer data between different applications and users on the Web. Therefore, we encounter these data fromats particularly often when we collect data from online sources. Moreover, in the economics/social science context, large and complex data sets (‘Big Data’) often come along in these formats, exactly because of the increasing importance of the Internet as a data source for empirical research in these disciplines.</p>
</div>
<div id="parsing-xml-and-json-in-r" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Parsing XML and JSON in R</h2>
<p>As in the case of CSV-like formats, there are several parsers in R that we can use to read XML and JSON data. The following examples are based on the example code shown above (the two text-files <code>persons.json</code> and <code>persons.xml</code>)</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="high-dimensional-data.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb138-2"><a href="high-dimensional-data.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb138-3"><a href="high-dimensional-data.html#cb138-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-4"><a href="high-dimensional-data.html#cb138-4" aria-hidden="true" tabindex="-1"></a><span class="co"># parse XML, represent XML document as R object</span></span>
<span id="cb138-5"><a href="high-dimensional-data.html#cb138-5" aria-hidden="true" tabindex="-1"></a>xml_doc <span class="ot">&lt;-</span> <span class="fu">read_xml</span>(<span class="st">&quot;persons.xml&quot;</span>)</span>
<span id="cb138-6"><a href="high-dimensional-data.html#cb138-6" aria-hidden="true" tabindex="-1"></a>xml_doc</span></code></pre></div>
<pre><code>## {xml_document}
## &lt;person&gt;
## [1] &lt;firstName&gt;John&lt;/firstName&gt;
## [2] &lt;lastName&gt;Smith&lt;/lastName&gt;
## [3] &lt;age&gt;25&lt;/age&gt;
## [4] &lt;address&gt;\n  &lt;streetAddress&gt;21 2nd Street&lt;/stree ...
## [5] &lt;phoneNumber&gt;\n  &lt;type&gt;home&lt;/type&gt;\n  &lt;number&gt;21 ...
## [6] &lt;phoneNumber&gt;\n  &lt;type&gt;fax&lt;/type&gt;\n  &lt;number&gt;646 ...
## [7] &lt;gender&gt;\n  &lt;type&gt;male&lt;/type&gt;\n&lt;/gender&gt;</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="high-dimensional-data.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb140-2"><a href="high-dimensional-data.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb140-3"><a href="high-dimensional-data.html#cb140-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-4"><a href="high-dimensional-data.html#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="co"># parse the JSON-document shown in the example above</span></span>
<span id="cb140-5"><a href="high-dimensional-data.html#cb140-5" aria-hidden="true" tabindex="-1"></a>json_doc <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">&quot;persons.json&quot;</span>)</span>
<span id="cb140-6"><a href="high-dimensional-data.html#cb140-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-7"><a href="high-dimensional-data.html#cb140-7" aria-hidden="true" tabindex="-1"></a><span class="co"># check the structure</span></span>
<span id="cb140-8"><a href="high-dimensional-data.html#cb140-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(json_doc)</span></code></pre></div>
<pre><code>## List of 6
##  $ firstName  : chr &quot;John&quot;
##  $ lastName   : chr &quot;Smith&quot;
##  $ age        : int 25
##  $ address    :List of 4
##   ..$ streetAddress: chr &quot;21 2nd Street&quot;
##   ..$ city         : chr &quot;New York&quot;
##   ..$ state        : chr &quot;NY&quot;
##   ..$ postalCode   : chr &quot;10021&quot;
##  $ phoneNumber:&#39;data.frame&#39;: 2 obs. of  2 variables:
##   ..$ type  : chr [1:2] &quot;home&quot; &quot;fax&quot;
##   ..$ number: chr [1:2] &quot;212 555-1234&quot; &quot;646 555-4567&quot;
##  $ gender     :List of 1
##   ..$ type: chr &quot;male&quot;</code></pre>
</div>
<div id="html" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> HTML</h2>
<p>Recall the data processing example in which we investigated how a webpage can be downloded, processed, and stored via the R command line. The code constituting a webpage is written in <a href="https://en.wikipedia.org/wiki/HTML">HyperText Markup Language (HTML)</a>, designed to be read in a web browser. Thus, HTML is predominantly designed for visual display in browsers, not for storing data. HTML is used to annotate content and define the hierarchy of content in a document in order to tell the browser how to display (‘render’) this document on the computer screen. Interestingly for us, its structure is very close to that of XML. However, the tags that can be used are strictly pre-defined and are aimed at explaining the structure of a website.</p>
<p>While not intended as a format to store and transfer data, HTML-documents (webpages) have de facto become a very important data source for many data science applications both in industry and academia.<a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a> Note how the two key concepts of computer code and digital data (both residing in a text file) are combined in a HTML document. From a web designer’s perspective, HTML is a tool to design the layout of a webpage (and the resulting HTML document is rather seen as <em>code</em>). From a data scientist’s perspective, on the other hand, HTML gives the data contained in a webpage (the actual content) a certain degree of structure which can be exploited to systematically extract the data from the webpage. In the context of HTML documents/webpages as data sources we thus also speak of ‘semi-structured data’: a webpage can contain a HTML-table (structured data) but likely also contains just raw text (unstructured data). In the following we explore the basic syntax of HTML by building a simple webpage.</p>
<div id="write-a-simple-webpage-with-html" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Write a simple webpage with HTML</h3>
<p>We start by opening a new text-file in RStudio (File-&gt;New File-&gt;TextFile). On the first line, we tell the browser what kind of document this is with the <code>&lt;!DOCTYPE&gt;</code> declaration set to <code>html</code>. In addition, the content of the whole HTML document must be put within <code>&lt;html&gt;</code> and <code>&lt;/html&gt;</code>, which represents the ‘root’ of the HTML document. In this you already recognize the typical (XML-like) annotation style in HTML with so-called HTML tags, starting with <code>&lt;</code> and ending with <code>&gt;</code> or <code>/&gt;</code> in the case of the closing tag, respectively. What is defined between two tags is either another HTML tag or the actual content. A HTML document usually consists of two main components: the head (everything between <code>&lt;head&gt;</code> and <code>&lt;/head&gt;</code> ) and the body. The head typically contains meta data describing the whole document like the title of the document: <code>&lt;title&gt;hello, world&lt;/title&gt;</code>. The body (everything between <code>&lt;body&gt;</code> and <code>&lt;/body&gt;</code>) contains all kind of specific content: text, images, tables, links, etc. In our very simple example, we just add a few words of plain text. We can now save this text document as <code>mysite.html</code> and open it in a web browser.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb142-1"><a href="high-dimensional-data.html#cb142-1" aria-hidden="true" tabindex="-1"></a>     <span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb142-2"><a href="high-dimensional-data.html#cb142-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-3"><a href="high-dimensional-data.html#cb142-3" aria-hidden="true" tabindex="-1"></a>     <span class="kw">&lt;html&gt;</span></span>
<span id="cb142-4"><a href="high-dimensional-data.html#cb142-4" aria-hidden="true" tabindex="-1"></a>         <span class="kw">&lt;head&gt;</span></span>
<span id="cb142-5"><a href="high-dimensional-data.html#cb142-5" aria-hidden="true" tabindex="-1"></a>             <span class="kw">&lt;title&gt;</span>hello, world<span class="kw">&lt;/title&gt;</span></span>
<span id="cb142-6"><a href="high-dimensional-data.html#cb142-6" aria-hidden="true" tabindex="-1"></a>         <span class="kw">&lt;/head&gt;</span></span>
<span id="cb142-7"><a href="high-dimensional-data.html#cb142-7" aria-hidden="true" tabindex="-1"></a>         <span class="kw">&lt;body&gt;</span></span>
<span id="cb142-8"><a href="high-dimensional-data.html#cb142-8" aria-hidden="true" tabindex="-1"></a>             <span class="kw">&lt;h2&gt;</span> hello, world <span class="kw">&lt;/h2&gt;</span></span>
<span id="cb142-9"><a href="high-dimensional-data.html#cb142-9" aria-hidden="true" tabindex="-1"></a>         <span class="kw">&lt;/body&gt;</span></span>
<span id="cb142-10"><a href="high-dimensional-data.html#cb142-10" aria-hidden="true" tabindex="-1"></a>     <span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>From this example we can learn a few important characteristics of HTML:</p>
<ol style="list-style-type: decimal">
<li>It becomes apparent how HTML is used to annotate/‘mark up’ data/text (with tags) in order to define the document’s content, structure, and hierarchy. Thus if we want to know what the title of this document is, we have to look for the <code>&lt;title&gt;</code>-tag.</li>
<li>We see that this systematic structuring follows a nesting principle: <code>head</code> and <code>body</code> are nested within the <code>html</code> document, at the same hierarchy level. Within the <code>head</code>, one level lower, we define the <code>title</code>. In other words, the <code>title</code> is part of the <code>head</code> which, in turn, is part of the <code>html</code> document. This logic, of one part being encapsulated in another part, is true in all correctly defined HTML documents. This is exactly the type of ‘data structure’ pointed to above, which can be exploited for the systematic extraction of specific parts of data from HTML documents.</li>
<li>We recognize that HTML code expresses essentially what is what in a document (note the similarity of the concept to storing data in XML). HTML code does therefore not contain explicit instructions like programming languages do, telling the computer what to do. If a HTML document contains a link to another website, all that is needed, is to define (with HTML tag <code>&lt;a href=...&gt;</code>) that this is a link. We do not have to explicitly express something like “if user clicks on link, then execute this and that….”</li>
</ol>
<p>What to do with the HTML document is thus in the hands of the person who works with it. Taking the data scientist’s perspective, what we need to know is how to traverse and exploit the structure of a HTML document in order to systematically extract the specific content/data that we are interested in. We thus have to learn how to tell the computer (with R) to extract a specific part of an HTML document. And in order to do so we have to acquire a basic understanding of the nesting structure implied by HTML (essentially the same logic as with XML).</p>
<p>One way to think about an HTML document is to imagine it as a tree-diagram, with <code>&lt;html&gt;..&lt;/html&gt;</code> as the ‘root,’ <code>&lt;head&gt;...&lt;/head&gt;</code> and <code>&lt;body&gt;...&lt;/body&gt;</code> as the ‘children’ of <code>&lt;html&gt;..&lt;/html&gt;</code> (and ‘siblings’ of each other), <code>&lt;title&gt;...&lt;/title&gt;</code> as the child of <code>&lt;head&gt;...&lt;/head&gt;</code>, etc. Figure <a href="high-dimensional-data.html#fig:html">5.1</a> illustrates this point.</p>
<div class="figure" style="text-align: center"><span id="fig:html"></span>
<img src="img/dom_tree.png" alt="HTML (DOM) tree diagram (by Lubaochuan 2014, licensed under the Creative Commons Attribution-Share Alike 4.0 International license)." width="50%" />
<p class="caption">
Figure 5.1: HTML (DOM) tree diagram (by Lubaochuan 2014, licensed under the Creative Commons Attribution-Share Alike 4.0 International license).
</p>
</div>

<p>The illustration of the nested structure can help to understand, how we can instruct the computer to find/extract a specific part of the data from such a document. In the following exercise we revisit the example shown in the lecture on data processing to do exactly this.</p>
</div>
<div id="two-ways-to-read-a-webpage-into-r" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Two ways to read a webpage into R</h3>
<p>In this example, we look at <a href="https://en.wikipedia.org/wiki/Economy_of_Switzerland">Wikipedia’s Economy of Switzerland page</a>, which contains the table depicted in Figure <a href="high-dimensional-data.html#fig:swiss">5.2</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:swiss"></span>
<img src="img/1_SwissGDP.png" alt="Source: https://en.wikipedia.org/wiki/Economy_of_Switzerland." width="50%" />
<p class="caption">
Figure 5.2: Source: <a href="https://en.wikipedia.org/wiki/Economy_of_Switzerland" class="uri">https://en.wikipedia.org/wiki/Economy_of_Switzerland</a>.
</p>
</div>

<p>As in the example shown in the data processing lecture (‘world population clock’), we first tell R to read the lines of text from the HTML document that constitutes the webpage.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="high-dimensional-data.html#cb143-1" aria-hidden="true" tabindex="-1"></a>swiss_econ <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">&quot;https://en.wikipedia.org/wiki/Economy_of_Switzerland&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in readLines(&quot;https://en.wikipedia.org/
## wiki/Economy_of_Switzerland&quot;): incomplete final
## line found on &#39;https://en.wikipedia.org/wiki/
## Economy_of_Switzerland&#39;</code></pre>
<p>And we can check if everything worked out well by having a look at the first lines of the webpage’s HTML code:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="high-dimensional-data.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(swiss_econ)</span></code></pre></div>
<pre><code>## [1] &quot;&lt;!DOCTYPE html&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
## [2] &quot;&lt;html class=\&quot;client-nojs\&quot; lang=\&quot;en\&quot; dir=\&quot;ltr\&quot;&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
## [3] &quot;&lt;head&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
## [4] &quot;&lt;meta charset=\&quot;UTF-8\&quot;/&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## [5] &quot;&lt;title&gt;Economy of Switzerland - Wikipedia&lt;/title&gt;&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
## [6] &quot;&lt;script&gt;document.documentElement.className=\&quot;client-js\&quot;;RLCONF={\&quot;wgBreakFrames\&quot;:false,\&quot;wgSeparatorTransformTable\&quot;:[\&quot;\&quot;,\&quot;\&quot;],\&quot;wgDigitTransformTable\&quot;:[\&quot;\&quot;,\&quot;\&quot;],\&quot;wgDefaultDateFormat\&quot;:\&quot;dmy\&quot;,\&quot;wgMonthNames\&quot;:[\&quot;\&quot;,\&quot;January\&quot;,\&quot;February\&quot;,\&quot;March\&quot;,\&quot;April\&quot;,\&quot;May\&quot;,\&quot;June\&quot;,\&quot;July\&quot;,\&quot;August\&quot;,\&quot;September\&quot;,\&quot;October\&quot;,\&quot;November\&quot;,\&quot;December\&quot;],\&quot;wgRequestId\&quot;:\&quot;f7d5f289-8051-4101-81e1-c50fae79b88c\&quot;,\&quot;wgCSPNonce\&quot;:false,\&quot;wgCanonicalNamespace\&quot;:\&quot;\&quot;,\&quot;wgCanonicalSpecialPageName\&quot;:false,\&quot;wgNamespaceNumber\&quot;:0,\&quot;wgPageName\&quot;:\&quot;Economy_of_Switzerland\&quot;,\&quot;wgTitle\&quot;:\&quot;Economy of Switzerland\&quot;,\&quot;wgCurRevisionId\&quot;:1065230304,\&quot;wgRevisionId\&quot;:1065230304,\&quot;wgArticleId\&quot;:27465,\&quot;wgIsArticle\&quot;:true,\&quot;wgIsRedirect\&quot;:false,\&quot;wgAction\&quot;:\&quot;view\&quot;,\&quot;wgUserName\&quot;:null,\&quot;wgUserGroups\&quot;:[\&quot;*\&quot;],\&quot;wgCategories\&quot;:[\&quot;CS1 maint: archived copy as title\&quot;,\&quot;CS1 German-language sources (de)\&quot;,\&quot;Articles with German-language sources (de)\&quot;,\&quot;Webarchive template wayback links\&quot;,\&quot;CS1 errors: generic title\&quot;,\&quot;Articles with French-language sources (fr)\&quot;,\&quot;Articles with short description\&quot;,&quot;</code></pre>
<p>The next thing we do is to look at how we can filter the webpage for certain information. For example, we search in the source code the line that contains the part of the webpage with the table, showing data on the Swiss GDP:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="high-dimensional-data.html#cb147-1" aria-hidden="true" tabindex="-1"></a>line_number <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&#39;US Dollar Exchange&#39;</span>, swiss_econ)</span></code></pre></div>
<p>Recall: we ask R on which line in <code>swiss_econ</code> (the source code stored in RAM) the text <code>US Dollar Exchange</code> is and store the answer (the line number) in RAM under the variable name <code>line_number</code>.</p>
<p>Then, we check on which line the text was found.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="high-dimensional-data.html#cb148-1" aria-hidden="true" tabindex="-1"></a>line_number</span></code></pre></div>
<pre><code>## [1] 230</code></pre>
<p>Knowing that the R object <code>swiss_econ</code> is a character vector (with each element containing one line of HTML code as a character string), we can look at this particular code:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="high-dimensional-data.html#cb150-1" aria-hidden="true" tabindex="-1"></a>swiss_econ[line_number]</span></code></pre></div>
<pre><code>## [1] &quot;&lt;th&gt;US Dollar Exchange&quot;</code></pre>
<p>Note that this rather primitive approach is ok to extract a cetain chunk of code from an HTML document, it is far from practical when we want to extract specific parts of data (the actual content, not including HTML code). In fact, so far we have completely ignored that the HTML-tags actually give some structure to the data in this document. That is, we simply have read the entire document line by line, not making a difference between code and data. The approach to filter the document could have equally well been taken for a plain text file.</p>
<p>If we want to exploit the structure given by HTML, we need to <em>parse</em> the HTML when reading the webpage into R. We can do this with the help of functions provided in the <code>rvest</code> package:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="high-dimensional-data.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install package if not yet installed</span></span>
<span id="cb152-2"><a href="high-dimensional-data.html#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;rvest&quot;)</span></span>
<span id="cb152-3"><a href="high-dimensional-data.html#cb152-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-4"><a href="high-dimensional-data.html#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="co"># load the package</span></span>
<span id="cb152-5"><a href="high-dimensional-data.html#cb152-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<p>After loading the package, we read the webpage into R, but this time using a function that parses the HTML code:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="high-dimensional-data.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parse the webpage, show the content</span></span>
<span id="cb153-2"><a href="high-dimensional-data.html#cb153-2" aria-hidden="true" tabindex="-1"></a>swiss_econ_parsed <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;https://en.wikipedia.org/wiki/Economy_of_Switzerland&quot;</span>)</span>
<span id="cb153-3"><a href="high-dimensional-data.html#cb153-3" aria-hidden="true" tabindex="-1"></a>swiss_econ_parsed</span></code></pre></div>
<pre><code>## {html_document}
## &lt;html class=&quot;client-nojs&quot; lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content= ...
## [2] &lt;body class=&quot;mediawiki ltr sitedir-ltr mw-hide-e ...</code></pre>
<p>Now we can easily separate the data/text from the html code. For example, we can extract the HTML table containing the data we are interested in as a <code>data.frames</code>.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="high-dimensional-data.html#cb155-1" aria-hidden="true" tabindex="-1"></a>tab_node <span class="ot">&lt;-</span> <span class="fu">html_node</span>(swiss_econ_parsed, <span class="at">xpath =</span> <span class="st">&quot;//*[@id=&#39;mw-content-text&#39;]/div/table[2]&quot;</span>)</span>
<span id="cb155-2"><a href="high-dimensional-data.html#cb155-2" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">html_table</span>(tab_node)</span>
<span id="cb155-3"><a href="high-dimensional-data.html#cb155-3" aria-hidden="true" tabindex="-1"></a>tab</span></code></pre></div>
<pre><code>## # A tibble: 19 x 3
##     Year `GDP (billions of CHF)` `US Dollar Exchange`
##    &lt;int&gt;                   &lt;int&gt; &lt;chr&gt;               
##  1  1980                     184 1.67 Francs         
##  2  1985                     244 2.43 Francs         
##  3  1990                     331 1.38 Francs         
##  4  1995                     374 1.18 Francs         
##  5  2000                     422 1.68 Francs         
##  6  2005                     464 1.24 Francs         
##  7  2006                     491 1.25 Francs         
##  8  2007                     521 1.20 Francs         
##  9  2008                     547 1.08 Francs         
## 10  2009                     535 1.09 Francs         
## 11  2010                     546 1.04 Francs         
## 12  2011                     659 0.89 Francs         
## 13  2012                     632 0.94 Francs         
## 14  2013                     635 0.93 Francs         
## 15  2014                     644 0.92 Francs         
## 16  2015                     646 0.96 Francs         
## 17  2016                     659 0.98 Francs         
## 18  2017                     668 1.01 Francs         
## 19  2018                     694 1.00 Francs</code></pre>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="13">
<li id="fn13"><p>Not that programs running on the server side are frequently capable of returning the same data in either format<a href="high-dimensional-data.html#fnref13" class="footnote-back">↩︎</a></p></li>
<li id="fn14"><p>The systematic collection and extraction of data from such web sources (often referred to as Web Data Mining) goes well beyond the scope of this course.<a href="high-dimensional-data.html#fnref14" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-storage-and-data-structures.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-sources-data-gathering-data-import.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["datahandling.pdf", "datahandling.html", "datahandling.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
